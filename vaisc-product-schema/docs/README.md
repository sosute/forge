# VAISC移行プロジェクト ドキュメント構成

## 📁 ディレクトリ構成

### 🔧 current-specs/ （現在有効な仕様書）
- **`JSON形式仕様書.md`** - VAISC準拠JSON形式の完全仕様書
- **`BigQueryスキーマ定義書.md`** - NDJSON用BigQueryテーブル設計書

### 📊 analysis/ （分析・マッピングドキュメント）
- **`JSON版機能マッピング分析表.md`** - 既存API機能のJSON形式実現可否分析
- **`JSON版レスポンスマッピング分析表.md`** - APIレスポンス構造のJSON形式互換性分析

### 📚 reference-docs/ （参照用ドキュメント）
- **`商品マスタDB項目一覧.md`** - 商品マスタDB全91項目の詳細情報
- **`既存API仕様書.md`** - 既存search/menu API仕様（パラメータ・レスポンス詳細）
- **`DB-API対応分析表.md`** - DB項目と既存API機能の基本対応確認表

### 🗄️ archive/ （過去バージョン・参考資料）
- CSV形式検討時のドキュメント群
- 初期分析ドキュメント
- 詳細は `archive/README.md` 参照

## 🚀 現在のプロジェクト状況

### ✅ 完了済み
- **JSON形式仕様策定**: VAISC Product Schema完全準拠
- **BigQueryスキーマ設計**: NDJSON形式最適化
- **互換性検証**: 機能実現率94%、レスポンス互換率96%達成

### 📈 JSON採用効果（定量評価）
- **機能実現率**: CSV版 91% → JSON版 94% (+3%改善)
- **レスポンス互換率**: CSV版 91% → JSON版 96% (+5%改善)
- **技術改善**: 型安全性、配列処理、null安全性の大幅向上

### 🎯 次のステップ
- [ ] DB→JSON変換ロジック設計・実装
- [ ] サンプルJSONデータ作成・検証
- [ ] BigQueryテーブル構築・テスト
- [ ] エンドツーエンド検証

## 📋 方針転換履歴

**2024年1月**: CSV形式 → **JSON形式**採用

### 転換理由
1. **VAISCスキーマとの構造的整合性**: 中間変換処理不要
2. **複数値属性の明確な表現**: カンマ区切り → ネイティブ配列
3. **型安全性**: 数値・文字列・ブール値の明確な区別
4. **バリデーション強化**: JSON Schemaによる事前検証

この方針転換により、技術課題が根本的に解決され、VAISC移行の実現可能性が大幅に向上しました。

## 📖 ドキュメント利用ガイド

### 実装時の参照順序
1. **基本理解**: `reference-docs/` で既存システム把握
2. **仕様確認**: `current-specs/` で実装仕様確定
3. **互換性確認**: `analysis/` で実現可否・改善効果確認
4. **過去経緯**: `archive/` でCSV検討経緯参照（必要時）

### 各文書の役割
- **仕様書**: 実装の完全ガイド（エビデンス重視）
- **分析表**: 機能・レスポンス互換性の定量評価
- **参照資料**: システム理解・基本対応確認用