# API検証チェック表

## 📋 検証概要

**目的**: 既存search APIの全パラメータパターンでのレスポンス構造変化を体系的に検証  
**対象**: https://marui.search.zetacx.net/api/search  
**基準**: マッピング分析表_リクエスト.md の全パラメータ

## ✅ 検証ステータス

- ✅ **完了**: 検証済み・レスポンス構造確認済み
- 🔄 **進行中**: 検証作業中
- ⏳ **未着手**: 未検証
- ❌ **エラー**: APIエラー・無効パラメータ
- 🔍 **要詳細確認**: 追加検証が必要

## 🔍 基本検索パラメータ

| パラメータ | 検証ステータス | 影響するレスポンス | 備考 |
|-----------|--------------|------------------|------|
| `q` (フリーワード) | ⏳ 未着手 | `products[]`, `total` | 検索結果配列・件数変化 |
| `factor` | ⏳ 未着手 | `products[]` | 検索方式指定 |
| `adw` (絞り込み) | ⏳ 未着手 | `products[]`, `total` | 追加キーワード |
| `exq` (除外) | ⏳ 未着手 | `products[]`, `total` | 除外キーワード |

## 🎯 フィルタリングパラメータ

| パラメータ | 検証ステータス | 影響するレスポンス | 備考 |
|-----------|--------------|------------------|------|
| `store` | ⏳ 未着手 | `products[]`, `total` | ストアフィルタ |
| `figure` | ⏳ 未着手 | `products[]`, `total` | 性別フィルタ |
| `bcd` | ⏳ 未着手 | `products[]`, `total` | ブランドフィルタ |
| `fcd` | ⏳ 未着手 | `products[]`, `total` | 第1カテゴリフィルタ |
| `scd` | ⏳ 未着手 | `products[]`, `total` | 第2カテゴリフィルタ |
| `price` | ⏳ 未着手 | `products[]`, `total` | 価格範囲フィルタ |
| `size` | ⏳ 未着手 | `products[]`, `total` | サイズフィルタ |
| `color` | 🔄 進行中 | `products[]`, `total` | カラーフィルタ（一部確認済み） |
| `offrate` | ⏳ 未着手 | `products[]`, `total` | 割引率フィルタ |

## 🚩 フラグフィルタパラメータ

| パラメータ | 検証ステータス | 影響するレスポンス | 備考 |
|-----------|--------------|------------------|------|
| `arrival` | ⏳ 未着手 | `products[]`, `total` | 新着フィルタ |
| `sale` | ⏳ 未着手 | `products[]`, `total` | セールフィルタ |
| `gift` | ⏳ 未着手 | `products[]`, `total` | ギフトフィルタ |
| `limitedsale` | ⏳ 未着手 | `products[]`, `total` | 期間限定セールフィルタ |
| `salespromotion` | ⏳ 未着手 | `products[]`, `total` | 販促キャンペーンフィルタ |
| `shipfree` | ⏳ 未着手 | `products[]`, `total` | 送料無料フィルタ |
| `preorder` | ⏳ 未着手 | `products[]`, `total` | 先行予約フィルタ |
| `used` | ⏳ 未着手 | `products[]`, `total` | 中古商品フィルタ |
| `coupon` | ⏳ 未着手 | `products[]`, `total` | クーポンフィルタ |
| `bulkdiscount` | ⏳ 未着手 | `products[]`, `total` | まとめ割フィルタ |
| `secretsale` | ⏳ 未着手 | `products[]`, `total` | シークレットセールフィルタ |

## 📅 日付フィルタパラメータ

| パラメータ | 検証ステータス | 影響するレスポンス | 備考 |
|-----------|--------------|------------------|------|
| `new_date` | ⏳ 未着手 | `products[]`, `total` | 新着日フィルタ |
| `sale_date` | ⏳ 未着手 | `products[]`, `total` | セール日フィルタ |

## 📊 ソート・表示制御パラメータ

| パラメータ | 検証ステータス | 影響するレスポンス | 備考 |
|-----------|--------------|------------------|------|
| `sortby` | ⏳ 未着手 | `products[]` 順序 | ソート指定 |
| `page` | ✅ 完了 | `nowPage`, `products[]` | ページ番号 |
| `per` | ✅ 完了 | `per`, `products[]` | 1ページあたり件数 |
| `full` | ✅ 完了 | `colorProducts`, `productId` | カラー表示制御 |

## 🔗 複合パラメータパターン

| パターン | 検証ステータス | 検証内容 | 備考 |
|----------|--------------|---------|------|
| `full=0 + color=brown` | ⏳ 未着手 | colorProducts配列 + カラーフィルタ | 代表色表示での色フィルタ |
| `full=1 + color=brown` | ⏳ 未着手 | colorProducts=null + カラーフィルタ | 全色表示での色フィルタ |
| `page + per + フィルタ` | ⏳ 未着手 | ページング + フィルタ複合 | フィルタ適用後のページング |
| `sortby + フィルタ` | ⏳ 未着手 | ソート + フィルタ複合 | フィルタ後のソート |
| `複数フィルタ` | ⏳ 未着手 | bcd + fcd + price 等 | フィルタ複数指定 |

## 🚨 エラーケース・境界値

| ケース | 検証ステータス | 検証内容 | 備考 |
|--------|--------------|---------|------|
| 存在しないブランドID | ⏳ 未着手 | `bcd=99999` | 無効ID指定 |
| 範囲外ページ番号 | ⏳ 未着手 | `page=999999` | 大きすぎるページ |
| 不正価格範囲 | ⏳ 未着手 | `price=abc-def` | 非数値指定 |
| 存在しないカラー | ⏳ 未着手 | `color=invalid` | 無効カラー指定 |

## 📈 検証進捗

- **総項目数**: 35項目
- **完了**: 3項目 (9%)
- **進行中**: 1項目 (3%)
- **未着手**: 31項目 (88%)

## 📝 検証時の記録項目

各パラメータ検証時に以下を記録：

1. **リクエストURL**: 実際のAPIコール
2. **レスポンスサイズ**: ファイルサイズ・total件数
3. **構造変化**: 追加・削除・変更されたフィールド
4. **値の変化**: 数値・配列長・オブジェクト内容の変化
5. **エラー状況**: APIエラー・タイムアウト・不正レスポンス

## 🎯 優先度設定

### 🔥 高優先度 (構造変化の可能性大)
- `full` ✅ (完了)
- `sortby` (ソート順序変化)
- `page`, `per` ✅ (完了)

### 🔶 中優先度 (データ内容変化)
- フィルタ系パラメータ全般
- 複合パラメータパターン

### 🔵 低優先度 (参考情報)
- エラーケース・境界値
- 詳細な日付フィルタ動作

---

**次のステップ**: TodoWrite で各検証項目をタスク化し、順次実行