# Chrome拡張 UI要件定義書

## 概要

HTML Semantic Checker Chrome拡張のUI要件を定義します。
bookmarkletのモーダル形式から、ユーザビリティを向上させた開閉式ドロワーUIに変更します。

## 主な改善点

### bookmarkletの課題
- ❌ **モーダルによる画面占有**: 確認対象要素が見えなくなる
- ❌ **ハイライト要素の識別困難**: 隣接要素でどれが対象か分からない
- ❌ **操作性の制限**: モーダル表示中は他の操作が制限される

### Chrome拡張での解決策
- ✅ **開閉式ドロワーUI**: 画面を占有せず、必要時のみ表示
- ✅ **選択要素の強調表示**: ハイライトとは別色で現在選択中の要素を明確化
- ✅ **カテゴリ別整理**: 見やすく分類された課題リスト

## UI設計詳細

### 1. ドロワーUI仕様

#### 基本レイアウト
```
┌─────────────────────────────────┐
│ [×] HTML Checker Results        │ ← ヘッダー（bookmarklet準拠）
├─────────────────────────────────┤
│ 📊 検出された問題: 12件          │ ← サマリー（bookmarklet準拠）
├─────────────────────────────────┤
│ ♿ アクセシビリティ (5件)         │ ← カテゴリ: accessibility
│   • 画像のalt属性欠落 (2件)      │
│   • リンクのボタン化 (3件)       │
├─────────────────────────────────┤
│ 📝 見出し構造 (3件)              │ ← カテゴリ: heading
│   • H1タグの欠落 (1件)          │
│   • 見出し構造の不適切 (2件)     │
├─────────────────────────────────┤
│ 🏗️ セマンティック構造 (2件)      │ ← カテゴリ: semantic
│   • 日付情報のdiv使用 (2件)      │
├─────────────────────────────────┤
│ 🧹 クリーンアップ (2件)          │ ← カテゴリ: cleanup
│   • 古いGoogle Analytics (2件)   │
└─────────────────────────────────┘
```

#### ドロワー動作
- **位置**: 画面右端から左にスライドイン
- **幅**: 450px（bookmarkletと同様）
- **高さ**: viewport の 80% まで
- **開閉**: 拡張アイコンクリックまたはキーボードショートカット
- **スクロール**: 内容が多い場合は縦スクロール対応

### 2. カテゴリ分類・表示

#### カテゴリ定義（bookmarklet準拠）
| カテゴリ | アイコン | 色 | 説明 |
|---------|---------|----|----- |
| heading | 📝 | #6366F1 | 見出し構造の問題 |
| accessibility | ♿ | #DC2626 | アクセシビリティの問題 |
| semantic | 🏗️ | #059669 | セマンティックHTML構造 |
| meta | 🏷️ | #F59E0B | メタタグ関連 |
| cleanup | 🧹 | #7C3AED | 不要コード・古いコード |

#### 重要度レベル（bookmarklet準拠）
| 重要度 | 色 | 説明 |
|-------|----|----- |
| error | #ff0000 | 必須修正項目（赤） |
| warning | #ffa500 | 推奨修正項目（オレンジ） |
| info | #2563EB | 改善提案項目（青） |

#### 表示優先順
1. **accessibility** - アクセシビリティ最優先
2. **heading** - 見出し構造
3. **semantic** - セマンティック構造
4. **meta** - メタタグ
5. **cleanup** - クリーンアップ

### 3. 課題リスト仕様

#### 課題アイテム構造（bookmarklet準拠）
```
┌─────────────────────────────────┐
│ H1タグの欠落                    │ ← タイトル（rule.name）
│ ページにH1タグが存在しません     │ ← メッセージ（result.message）
│ 対象要素: 1個                   │ ← 要素数（クリック可能）
│ [severity: error]               │ ← 重要度表示
└─────────────────────────────────┘
```

#### インタラクション
- **ホバー効果**: 背景色の淡い変化
- **クリック動作**: 
  1. 対象要素にスムーズスクロール
  2. 要素のハイライト表示
  3. 選択状態の強調表示

### 4. 要素ハイライト仕様（bookmarklet準拠 + 改善）

#### ハイライト表示（bookmarklet準拠）
```css
/* 通常のハイライト（問題要素全体） */
outline: 3px solid red;           /* bookmarkletと同様 */
outline-offset: 2px;              /* bookmarkletと同様 */
/* 背景色は追加しない（bookmarklet準拠） */
```

#### 選択要素強調（新機能）
```css
/* 現在選択中の要素（クリックされた要素） */
outline: 4px solid #059669; /* 緑色で強調 */
outline-offset: 4px;
background-color: rgba(5, 150, 105, 0.2); /* より濃い背景色 */
box-shadow: 0 0 20px rgba(5, 150, 105, 0.5); /* グローエフェクト */
/* 2秒後に自動解除（bookmarklet準拠） */
```

#### 識別性向上策
- **選択要素**: 緑色（#059669）で明確に区別
- **アウトライン太さ**: 選択中は4px、通常は2px
- **グローエフェクト**: 選択中のみbox-shadow追加
- **z-index制御**: 選択要素を最前面に表示

### 5. デスクトップ特化UI仕様

#### ドロワー仕様
- **固定幅**: 450px（bookmarkletと同様）
- **対象環境**: デスクトップブラウザのみ
- **最小解像度**: 1024x768以上を想定
- **レスポンシブ対応**: 不要（デスクトップ特化）

### 6. キーボードナビゲーション

#### ショートカット
| キー | 動作 |
|------|------|
| `Ctrl+Shift+H` | ドロワー開閉 |
| `↑/↓` | 課題リスト内移動 |
| `Enter` | 選択課題の要素に移動 |
| `Esc` | ドロワーを閉じる |

### 7. アニメーション仕様

#### ドロワー開閉
```css
/* スライドイン/アウト */
transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
transform: translateX(100%); /* 閉じた状態 */
transform: translateX(0);    /* 開いた状態 */
```

#### 要素ハイライト
```css
/* フェードイン効果 */
transition: all 0.2s ease-in-out;
```

#### スクロールアニメーション
```javascript
// スムーズスクロール
element.scrollIntoView({ 
  behavior: 'smooth', 
  block: 'center' 
});
```

## 実装優先度

### Phase 1: 基本実装
1. ✅ ドロワーUIの基本構造
2. ✅ カテゴリ別課題リスト表示
3. ✅ 要素ハイライト機能

### Phase 2: UX向上
1. ✅ 選択要素の強調表示
2. ✅ スムーズスクロール
3. ✅ レスポンシブ対応

### Phase 3: 高度な機能
1. ⏳ キーボードナビゲーション
2. ⏳ アニメーション効果
3. ⏳ 課題フィルタリング

## 期待される効果

### ユーザビリティ向上
- 📈 **視認性**: ドロワーにより背景コンテンツが見える
- 📈 **操作性**: 課題確認しながら要素を特定可能
- 📈 **効率性**: カテゴリ分類により問題の優先度が明確

### 開発者体験向上
- 🎯 **明確な課題特定**: 選択要素の強調表示
- 🎯 **効率的な修正作業**: 優先度順の課題整理
- 🎯 **包括的な分析**: bookmarklet機能の完全移植

## 技術仕様

### 使用技術
- **フレームワーク**: Vanilla JavaScript（ES Modules回避）
- **スタイリング**: CSS3（CSS-in-JS）
- **アニメーション**: CSS Transitions + Transform
- **レスポンシブ**: CSS Media Queries

### パフォーマンス要件
- **初期表示**: 300ms以内
- **スクロール**: 60fps維持
- **メモリ使用量**: 10MB以下
- **DOM更新**: 必要最小限に制限