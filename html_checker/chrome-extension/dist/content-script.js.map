{"version":3,"file":"content-script.js","mappings":"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","sources":["webpack://html-semantic-checker/./src/content-script/config.js","webpack://html-semantic-checker/./src/content-script/utils/debug.js","webpack://html-semantic-checker/./src/content-script/utils/dom.js","webpack://html-semantic-checker/./src/content-script/engine/element-preprocessor.js","webpack://html-semantic-checker/./src/content-script/analysis/heading.js","webpack://html-semantic-checker/./src/content-script/analysis/accessibility.js","webpack://html-semantic-checker/./src/content-script/analysis/semantic.js","webpack://html-semantic-checker/./src/content-script/analysis/cleanup.js","webpack://html-semantic-checker/./src/content-script/engine/main-engine.js","webpack://html-semantic-checker/./src/content-script/ui/highlight.js","webpack://html-semantic-checker/./src/content-script/ui/drawer.js","webpack://html-semantic-checker/./src/content-script/index.js"],"sourcesContent":["/**\n * HTML Semantic Checker - Configuration\n */\n\nexport const CONFIG = {\n  debug: true,\n  enabledRules: ['all'] // すべてのルールを有効\n};\n\nexport const SEVERITY = {\n  ERROR: 'error',\n  WARNING: 'warning',\n  INFO: 'info'\n};\n\nexport const CATEGORIES = {\n  HEADING: 'heading',\n  ACCESSIBILITY: 'accessibility',\n  SEO: 'seo',\n  STRUCTURE: 'structure',\n  CLEANUP: 'cleanup'\n};\n\n// 非表示要素のタグリスト\nexport const NON_VISIBLE_TAGS = ['META', 'SCRIPT', 'STYLE', 'LINK', 'TITLE', 'BASE', 'NOSCRIPT'];\n\n// ハイライトから除外するタグ\nexport const EXCLUDE_HIGHLIGHT_TAGS = ['BODY', 'HTML', 'MAIN', 'HEADER', 'FOOTER', 'NAV', 'SECTION', 'ARTICLE', 'ASIDE'];\n\n// 見出し構造チェックで許可される単純なタグ\nexport const ALLOWED_SIMPLE_TAGS = ['BR', 'A', 'STRONG', 'EM', 'SPAN', 'I', 'B', 'SMALL'];\n\n// 装飾目的のHTMLタグ（非推奨）\nexport const PRESENTATIONAL_TAGS = ['FONT', 'CENTER', 'U', 'S', 'STRIKE', 'BIG', 'SMALL', 'TT'];\n\n// インラインセマンティックタグ\nexport const INLINE_SEMANTIC_TAGS = ['STRONG', 'EM', 'MARK', 'CODE', 'KBD', 'SAMP', 'VAR'];\n\n// トラッキングピクセルのパターン\nexport const TRACKING_PIXEL_PATTERNS = [\n  /adsct/i,           // Twitter/X tracking\n  /doubleclick/i,     // Google DoubleClick\n  /googletagmanager/i,// Google Tag Manager\n  /facebook/i,        // Facebook tracking\n  /analytics/i,       // General analytics\n  /pixel/i,           // General pixel tracking\n  /tr\\?/i,            // Common tracking parameter\n  /1x1/i              // 1x1 pixel indicator\n];\n\n// 古いGoogle Analyticsのパターン\nexport const LEGACY_GA_PATTERNS = [\n  /UA-\\d+-\\d+/,\n  /_gat\\._getTracker/,\n  /pageTracker/,\n  /google-analytics\\.com\\/ga\\.js/\n];\n\n// Adobe関連のパターン\nexport const ADOBE_PATTERNS = [\n  /s_code\\.js/,\n  /omniture\\.js/,\n  /sitecatalyst/i,\n  /adobe\\.com\\/dtm/,\n  /s\\.t\\(\\)/,\n  /s\\.tl\\(/\n];\n\n// スタイル設定\nexport const DRAWER_STYLES = {\n  width: '450px',\n  zIndex: 2147483647 // 最大値に近い値\n};","/**\n * デバッグ関連のユーティリティ\n */\n\nimport { CONFIG } from '../config.js';\n\n/**\n * 条件付きログ出力\n * @param {string} prefix - ログのプレフィックス\n * @param {...any} args - ログ引数\n */\nexport function debugLog(prefix, ...args) {\n  if (CONFIG.debug) {\n    console.log(`[${prefix}]`, ...args);\n  }\n}\n\n/**\n * エラーログ出力\n * @param {string} prefix - ログのプレフィックス\n * @param {...any} args - ログ引数\n */\nexport function errorLog(prefix, ...args) {\n  console.error(`[${prefix}]`, ...args);\n}\n\n/**\n * 警告ログ出力\n * @param {string} prefix - ログのプレフィックス  \n * @param {...any} args - ログ引数\n */\nexport function warnLog(prefix, ...args) {\n  console.warn(`[${prefix}]`, ...args);\n}","/**\n * DOM操作関連のユーティリティ関数\n */\n\nimport { NON_VISIBLE_TAGS } from '../config.js';\n\n/**\n * 非表示要素かどうかを判定\n * @param {Element} element - 判定対象の要素\n * @returns {boolean} 非表示要素の場合true\n */\nexport function isNonVisibleElement(element) {\n  // head内の要素\n  if (element.closest('head') !== null) {\n    return true;\n  }\n  \n  // meta、script、style、linkタグなど\n  if (NON_VISIBLE_TAGS.includes(element.tagName)) {\n    return true;\n  }\n  \n  // CSS で完全に隠されている要素\n  const computedStyle = window.getComputedStyle(element);\n  if (computedStyle.display === 'none' || \n      computedStyle.visibility === 'hidden' || \n      element.offsetParent === null) {\n    return true;\n  }\n  \n  return false;\n}\n\n/**\n * HTML Semantic Checkerの要素かどうかを判定\n * @param {Element} element - 判定対象の要素\n * @returns {boolean} HTML Checkerの要素の場合true\n */\nexport function isHtmlCheckerElement(element) {\n  // HTML Checkerのドロワー要素\n  if (element.id === 'html-semantic-checker-drawer' || \n      element.closest('#html-semantic-checker-drawer') !== null) {\n    return true;\n  }\n  \n  // HTML Checkerのスタイル要素\n  if (element.id === 'html-semantic-checker-styles' ||\n      element.id === 'html-semantic-checker-highlight-styles') {\n    return true;\n  }\n  \n  // HTML Checkerのクラス名を持つ要素\n  if (element.className && typeof element.className === 'string') {\n    if (element.className.includes('hsc-') || \n        element.className.includes('html-semantic-checker')) {\n      return true;\n    }\n  }\n  \n  return false;\n}\n\n/**\n * 除外対象の要素かどうかを判定（HTML Checker + 指定ヘッダー・フッター要素）\n * @param {Element} element - 判定対象の要素\n * @returns {boolean} 除外対象の場合true\n */\nexport function isExcludedElement(element) {\n  // HTML Checker要素の除外\n  if (isHtmlCheckerElement(element)) {\n    return true;\n  }\n  \n  // 指定されたヘッダー要素の除外\n  if (element.closest('.mc_sp-header-wrapper') !== null || \n      element.closest('.mc_pc-header-wrapper') !== null) {\n    return true;\n  }\n  \n  // 指定されたフッター要素の除外\n  if (element.closest('.mc_pc-footer-wrapper') !== null || \n      element.closest('.mc_sp-footer-wrapper') !== null) {\n    return true;\n  }\n  \n  return false;\n}\n\n/**\n * 要素の深さ（ネストレベル）をチェック\n * @param {Element} element - チェック対象の要素\n * @returns {boolean} 3階層以上のネストがある場合true\n */\nexport function checkDeepNesting(element) {\n  function getMaxDepth(el, currentDepth = 0) {\n    if (currentDepth >= 3) return currentDepth; // 3階層に達したら早期終了\n    \n    let maxChildDepth = currentDepth;\n    for (const child of el.children) {\n      const childDepth = getMaxDepth(child, currentDepth + 1);\n      maxChildDepth = Math.max(maxChildDepth, childDepth);\n    }\n    return maxChildDepth;\n  }\n  \n  const maxDepth = getMaxDepth(element);\n  console.log(`[Checker] Max nesting depth: ${maxDepth}`);\n  return maxDepth >= 3;\n}\n\n/**\n * 要素のテキストを安全に取得（最大文字数制限付き）\n * @param {Element} element - 対象要素\n * @param {number} maxLength - 最大文字数\n * @returns {string} 切り詰められたテキスト\n */\nexport function getElementText(element, maxLength = 50) {\n  const text = element.textContent || '';\n  return text.length > maxLength ? text.substring(0, maxLength) + '...' : text;\n}\n\n/**\n * 要素の完全なHTMLソースを取得\n * @param {Element} element - 対象要素\n * @param {boolean} includeChildren - 子要素も含めるかどうか\n * @returns {string} 完全なHTMLソース\n */\nexport function getElementFullHTML(element, includeChildren = true) {\n  if (!element || !element.outerHTML) {\n    return 'HTML取得不可';\n  }\n  \n  let html = element.outerHTML;\n  \n  // 長すぎる場合は切り詰める（500文字まで）\n  if (html.length > 500) {\n    html = html.substring(0, 500) + '...';\n  }\n  \n  // インデントを整理してより読みやすくする\n  return formatHTML(html);\n}\n\n/**\n * HTMLを読みやすくフォーマット\n * @param {string} html - フォーマット対象のHTML\n * @returns {string} フォーマット済みHTML\n */\nfunction formatHTML(html) {\n  // 基本的なフォーマットを適用\n  return html\n    .replace(/></g, '>\\n<')  // タグ間に改行を挿入\n    .replace(/\\s+/g, ' ')    // 複数の空白を1つに統一\n    .trim();\n}\n\n/**\n * 要素の詳細情報を取得（元の実装を完全復元）\n * @param {Element} element - 対象要素\n * @returns {string} 要素の詳細情報\n */\nexport function getElementDetails(element) {\n  if (element.tagName === \"IMG\") {\n    const src = element.src || element.getAttribute(\"src\");\n    const alt = element.getAttribute(\"alt\");\n    return `<img src=\"${src ? src.split(\"/\").pop() : \"src不明\"}\" alt=\"${alt || \"(alt属性なし)\"}\">`;\n  } else if (element.tagName === \"META\") {\n    const name = element.getAttribute(\"name\");\n    const content = element.getAttribute(\"content\");\n    return `<meta name=\"${name || \"name不明\"}\" content=\"${content || \"content不明\"}\">`;\n  } else if (element.tagName === \"SCRIPT\") {\n    const src = element.getAttribute(\"src\");\n    if (src) {\n      return `<script src=\"${src}\">`;\n    } else {\n      const scriptContent = element.textContent || element.innerHTML;\n      return `<script>${scriptContent.substring(0, 100)}${scriptContent.length > 100 ? \"...\" : \"\"}</script>`;\n    }\n  } else if (element.tagName.startsWith(\"H\")) {\n    // 見出し要素の詳細表示\n    const headingLevel = element.tagName.charAt(1);\n    const id = element.getAttribute(\"id\") || \"\";\n    const className = element.getAttribute(\"class\") || \"\";\n    \n    let innerContent = element.innerHTML.trim();\n    if (innerContent.length > 200) {\n      innerContent = innerContent.substring(0, 200) + \"...\";\n    }\n    \n    let elementText = `<h${headingLevel}`;\n    if (id) elementText += ` id=\"${id}\"`;\n    if (className) elementText += ` class=\"${className}\"`;\n    elementText += `>${innerContent}</h${headingLevel}>`;\n    \n    return elementText;\n  } else if ([\"INPUT\", \"SELECT\", \"TEXTAREA\"].includes(element.tagName)) {\n    // フォーム要素の詳細表示\n    const type = element.getAttribute(\"type\") || \"\";\n    const name = element.getAttribute(\"name\") || \"\";\n    const id = element.getAttribute(\"id\") || \"\";\n    const placeholder = element.getAttribute(\"placeholder\") || \"\";\n    \n    let formInfo = `<${element.tagName.toLowerCase()}`;\n    if (type) formInfo += ` type=\"${type}\"`;\n    if (id) formInfo += ` id=\"${id}\"`;\n    if (name) formInfo += ` name=\"${name}\"`;\n    if (placeholder) formInfo += ` placeholder=\"${placeholder}\"`;\n    formInfo += `>`;\n    \n    return formInfo;\n  } else if (element.tagName === \"A\") {\n    // リンク要素の詳細表示\n    const href = element.getAttribute(\"href\") || \"\";\n    const title = element.getAttribute(\"title\") || \"\";\n    const ariaLabel = element.getAttribute(\"aria-label\") || \"\";\n    const textContent = element.textContent.trim();\n    \n    let linkInfo = `<a`;\n    if (href) linkInfo += ` href=\"${href}\"`;\n    if (title) linkInfo += ` title=\"${title}\"`;\n    if (ariaLabel) linkInfo += ` aria-label=\"${ariaLabel}\"`;\n    linkInfo += `>`;\n    \n    if (textContent) {\n      linkInfo += textContent.length > 50 ? textContent.substring(0, 50) + \"...\" : textContent;\n    } else {\n      linkInfo += \"(テキストなし)\";\n    }\n    \n    linkInfo += `</a>`;\n    return linkInfo;\n  } else if (element.tagName === \"TABLE\") {\n    // テーブル要素の詳細表示\n    const border = element.getAttribute(\"border\") || \"\";\n    const cellpadding = element.getAttribute(\"cellpadding\") || \"\";\n    const cellspacing = element.getAttribute(\"cellspacing\") || \"\";\n    const className = element.getAttribute(\"class\") || \"\";\n    \n    let tableInfo = `<table`;\n    if (className) tableInfo += ` class=\"${className}\"`;\n    if (border) tableInfo += ` border=\"${border}\"`;\n    if (cellpadding) tableInfo += ` cellpadding=\"${cellpadding}\"`;\n    if (cellspacing) tableInfo += ` cellspacing=\"${cellspacing}\"`;\n    tableInfo += `>`;\n    \n    return tableInfo;\n  }\n  \n  // その他の要素は基本的な表示\n  return getElementText(element);\n}","/**\n * 要素プリプロセッサー - 検査対象要素の事前選別\n * 一度の処理で全DOM要素をスキャンし、検査対象要素を効率的に分類\n */\n\nimport { isExcludedElement } from '../utils/dom.js';\nimport { debugLog } from '../utils/debug.js';\n\n/**\n * 分析対象要素を事前に選別・分類\n * @returns {Object} 要素タイプ別に分類された検査対象要素\n */\nexport function getAnalysisTargetElements() {\n  debugLog('Preprocessor', 'Starting element preprocessing...');\n  \n  const startTime = performance.now();\n  \n  // 検査対象要素を格納するオブジェクト\n  const targetElements = {\n    // 見出し要素\n    headings: {\n      all: [],\n      h1: [],\n      h2: [],\n      h3: [],\n      h4: [],\n      h5: [],\n      h6: []\n    },\n    \n    // アクセシビリティ関連要素\n    accessibility: {\n      images: [],\n      imagesWithoutAlt: [],\n      links: [],\n      formElements: [],\n      elementsWithRole: [],\n      expandableElements: [],\n      navigationLinks: [],\n      tables: []\n    },\n    \n    // セマンティック要素\n    semantic: {\n      dateElements: [],\n      timeElements: []\n    },\n    \n    // クリーンアップ対象要素\n    cleanup: {\n      scripts: [],\n      noscripts: []\n    }\n  };\n  \n  // 統計情報\n  const stats = {\n    totalElements: 0,\n    excludedElements: 0,\n    processedElements: 0\n  };\n  \n  // 全要素を一度だけスキャン\n  const allElements = document.querySelectorAll('*');\n  stats.totalElements = allElements.length;\n  \n  debugLog('Preprocessor', `Scanning ${stats.totalElements} elements...`);\n  \n  Array.from(allElements).forEach(element => {\n    // 除外対象チェック（一度だけ実行）\n    if (isExcludedElement(element)) {\n      stats.excludedElements++;\n      return;\n    }\n    \n    stats.processedElements++;\n    \n    // 要素タイプ別に分類\n    classifyElement(element, targetElements);\n  });\n  \n  const endTime = performance.now();\n  const processingTime = endTime - startTime;\n  \n  // 統計情報をログ出力\n  logPreprocessingStats(stats, targetElements, processingTime);\n  \n  return targetElements;\n}\n\n/**\n * 要素を適切なカテゴリに分類\n * @param {Element} element - 分類対象の要素\n * @param {Object} targetElements - 分類先オブジェクト\n */\nfunction classifyElement(element, targetElements) {\n  const tagName = element.tagName.toLowerCase();\n  \n  // 見出し要素の分類\n  if (tagName.match(/^h[1-6]$/)) {\n    targetElements.headings.all.push(element);\n    targetElements.headings[tagName].push(element);\n  }\n  \n  // アクセシビリティ関連要素の分類\n  classifyAccessibilityElements(element, targetElements.accessibility);\n  \n  // セマンティック要素の分類\n  classifySemanticElements(element, targetElements.semantic);\n  \n  // クリーンアップ対象要素の分類\n  classifyCleanupElements(element, targetElements.cleanup);\n}\n\n/**\n * アクセシビリティ関連要素の分類\n * @param {Element} element - 対象要素\n * @param {Object} accessibilityElements - アクセシビリティ要素格納オブジェクト\n */\nfunction classifyAccessibilityElements(element, accessibilityElements) {\n  const tagName = element.tagName.toLowerCase();\n  \n  // 画像要素\n  if (tagName === 'img') {\n    accessibilityElements.images.push(element);\n    if (!element.hasAttribute('alt')) {\n      accessibilityElements.imagesWithoutAlt.push(element);\n    }\n  }\n  \n  // リンク要素\n  if (tagName === 'a') {\n    accessibilityElements.links.push(element);\n    \n    // ナビゲーションリンクかチェック\n    if (element.closest('nav') || \n        element.classList.contains('breadcrumb') || \n        element.classList.contains('pagination') ||\n        element.closest('.breadcrumb') ||\n        element.closest('.pagination')) {\n      accessibilityElements.navigationLinks.push(element);\n    }\n  }\n  \n  // フォーム要素\n  if (['input', 'select', 'textarea'].includes(tagName)) {\n    const inputType = element.getAttribute('type');\n    // hidden, submit, buttonは除外\n    if (inputType !== 'hidden' && inputType !== 'submit' && inputType !== 'button') {\n      accessibilityElements.formElements.push(element);\n    }\n  }\n  \n  // role属性を持つ要素\n  if (element.hasAttribute('role')) {\n    accessibilityElements.elementsWithRole.push(element);\n  }\n  \n  // 展開可能要素（aria-expanded対象）\n  if (element.hasAttribute('data-toggle') || \n      element.hasAttribute('aria-controls') ||\n      (tagName === 'button' && element.hasAttribute('data-toggle')) ||\n      element.classList.contains('dropdown-toggle') ||\n      element.classList.contains('accordion-toggle')) {\n    // detailsのsummary要素は除外\n    if (!(tagName === 'summary' && element.closest('details'))) {\n      accessibilityElements.expandableElements.push(element);\n    }\n  }\n  \n  // テーブル要素\n  if (tagName === 'table') {\n    accessibilityElements.tables.push(element);\n  }\n}\n\n/**\n * セマンティック要素の分類\n * @param {Element} element - 対象要素\n * @param {Object} semanticElements - セマンティック要素格納オブジェクト\n */\nfunction classifySemanticElements(element, semanticElements) {\n  const tagName = element.tagName.toLowerCase();\n  \n  // time要素\n  if (tagName === 'time') {\n    semanticElements.timeElements.push(element);\n  }\n  \n  // 日付らしいテキストを含むdiv要素\n  if (tagName === 'div') {\n    const text = element.textContent.trim();\n    // 日付パターンをチェック（簡単な例）\n    if (text.match(/\\d{4}[年\\-\\/]\\d{1,2}[月\\-\\/]\\d{1,2}日?|\\d{1,2}[月\\-\\/]\\d{1,2}日?[,\\s]*\\d{4}/)) {\n      semanticElements.dateElements.push(element);\n    }\n  }\n}\n\n/**\n * クリーンアップ対象要素の分類\n * @param {Element} element - 対象要素\n * @param {Object} cleanupElements - クリーンアップ要素格納オブジェクト\n */\nfunction classifyCleanupElements(element, cleanupElements) {\n  const tagName = element.tagName.toLowerCase();\n  \n  // script要素\n  if (tagName === 'script') {\n    cleanupElements.scripts.push(element);\n  }\n  \n  // noscript要素\n  if (tagName === 'noscript') {\n    cleanupElements.noscripts.push(element);\n  }\n}\n\n/**\n * プリプロセス統計情報をログ出力\n * @param {Object} stats - 統計情報\n * @param {Object} targetElements - 分類済み要素\n * @param {number} processingTime - 処理時間（ms）\n */\nfunction logPreprocessingStats(stats, targetElements, processingTime) {\n  debugLog('Preprocessor', '=== Element Preprocessing Complete ===');\n  debugLog('Preprocessor', `Processing time: ${processingTime.toFixed(2)}ms`);\n  debugLog('Preprocessor', `Total elements: ${stats.totalElements}`);\n  debugLog('Preprocessor', `Excluded elements: ${stats.excludedElements}`);\n  debugLog('Preprocessor', `Processed elements: ${stats.processedElements}`);\n  \n  // 見出し統計\n  debugLog('Preprocessor', `Headings: ${targetElements.headings.all.length} total`);\n  ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'].forEach(tag => {\n    const count = targetElements.headings[tag].length;\n    if (count > 0) {\n      debugLog('Preprocessor', `  ${tag.toUpperCase()}: ${count}`);\n    }\n  });\n  \n  // アクセシビリティ統計\n  debugLog('Preprocessor', `Images: ${targetElements.accessibility.images.length} (${targetElements.accessibility.imagesWithoutAlt.length} without alt)`);\n  debugLog('Preprocessor', `Links: ${targetElements.accessibility.links.length}`);\n  debugLog('Preprocessor', `Form elements: ${targetElements.accessibility.formElements.length}`);\n  debugLog('Preprocessor', `Elements with role: ${targetElements.accessibility.elementsWithRole.length}`);\n  \n  debugLog('Preprocessor', '======================================');\n}\n\n/**\n * 除外要素統計を取得（開発・デバッグ用）\n * @returns {Object} 除外要素の統計情報\n */\nexport function getExclusionStats() {\n  const allElements = document.querySelectorAll('*');\n  const excludedElements = [];\n  const excludedByReason = {\n    htmlChecker: 0,\n    header: 0,\n    footer: 0\n  };\n  \n  Array.from(allElements).forEach(element => {\n    if (isExcludedElement(element)) {\n      excludedElements.push(element);\n      \n      // 除外理由を分類\n      if (element.closest('.mc_sp-header-wrapper') || element.closest('.mc_pc-header-wrapper')) {\n        excludedByReason.header++;\n      } else if (element.closest('.mc_pc-footer-wrapper') || element.closest('.mc_sp-footer-wrapper')) {\n        excludedByReason.footer++;\n      } else {\n        excludedByReason.htmlChecker++;\n      }\n    }\n  });\n  \n  return {\n    total: excludedElements.length,\n    elements: excludedElements,\n    byReason: excludedByReason\n  };\n}","/**\n * 見出し構造分析モジュール\n */\n\nimport { SEVERITY, ALLOWED_SIMPLE_TAGS } from '../config.js';\nimport { checkDeepNesting, isExcludedElement, getElementFullHTML } from '../utils/dom.js';\nimport { debugLog } from '../utils/debug.js';\n\n/**\n * 見出し構造を分析（プリプロセス済み要素を使用）\n * @param {Object} targetElements - プリプロセス済み要素（オプション）\n * @returns {Object} 見出し構造の分析結果\n */\nexport function analyzeHeadingStructure(targetElements = null) {\n  // プリプロセス済み要素が提供されている場合はそれを使用\n  const headings = targetElements ? targetElements.headings : {\n    all: Array.from(document.querySelectorAll('h1, h2, h3, h4, h5, h6')).filter(h => !isExcludedElement(h)),\n    h1: Array.from(document.querySelectorAll('h1')).filter(h => !isExcludedElement(h)),\n    h2: Array.from(document.querySelectorAll('h2')).filter(h => !isExcludedElement(h)),\n    h3: Array.from(document.querySelectorAll('h3')).filter(h => !isExcludedElement(h)),\n    h4: Array.from(document.querySelectorAll('h4')).filter(h => !isExcludedElement(h)),\n    h5: Array.from(document.querySelectorAll('h5')).filter(h => !isExcludedElement(h)),\n    h6: Array.from(document.querySelectorAll('h6')).filter(h => !isExcludedElement(h))\n  };\n  \n  const structure = {\n    total: headings.all.length,\n    h1Count: headings.h1.length,\n    h2Count: headings.h2.length,\n    h3Count: headings.h3.length,\n    h4Count: headings.h4.length,\n    h5Count: headings.h5.length,\n    h6Count: headings.h6.length,\n    hasProperHierarchy: true,\n    issues: []\n  };\n\n  // 見出し階層チェック\n  if (structure.h1Count === 0) {\n    structure.issues.push('H1見出しが存在しません');\n    structure.hasProperHierarchy = false;\n  }\n  if (structure.h1Count > 1) {\n    structure.issues.push('H1見出しが複数存在します');\n  }\n\n  return structure;\n}\n\n/**\n * 見出し関連の問題を検出（プリプロセス済み要素を使用）\n * @param {Object} targetElements - プリプロセス済み要素（オプション）\n * @returns {Array} 検出された問題のリスト\n */\nexport function detectHeadingIssues(targetElements = null) {\n  const issues = [];\n\n  // H1タグチェック（プリプロセス済み要素を使用）\n  const h1Elements = targetElements ? targetElements.headings.h1 : \n                     Array.from(document.querySelectorAll('h1')).filter(h => !isExcludedElement(h));\n  debugLog('Checker', 'H1 elements found (excluding excluded elements):', h1Elements.length);\n  \n  if (h1Elements.length === 0) {\n    issues.push({\n      category: 'heading',\n      severity: SEVERITY.ERROR,\n      rule: 'missing_h1',\n      name: 'H1タグの欠落',\n      message: 'ページにH1タグがありません。H1はページのメインタイトルを表し、SEOとアクセシビリティの観点から必須です。',\n      elements: [],\n      solution: getH1SolutionText()\n    });\n  }\n\n  // 見出し構造の詳細チェック\n  const headingStructureIssues = analyzeDetailedHeadingStructure(targetElements);\n  issues.push(...headingStructureIssues);\n\n  return issues;\n}\n\n/**\n * 詳細な見出し構造の分析（プリプロセス済み要素を使用）\n * @param {Object} targetElements - プリプロセス済み要素（オプション）\n * @returns {Array} 見出し構造の問題リスト\n */\nfunction analyzeDetailedHeadingStructure(targetElements = null) {\n  const issues = [];\n  const headings = targetElements ? targetElements.headings.all : \n                   Array.from(document.querySelectorAll('h1, h2, h3, h4, h5, h6')).filter(h => !isExcludedElement(h));\n  const problematicHeadings = [];\n  const headingStructureProblems = [];\n  let previousLevel = 0;\n\n  headings.forEach((heading, index) => {\n    const level = parseInt(heading.tagName.charAt(1));\n    const rawText = heading.textContent.trim();\n    const headingText = rawText.substring(0, 30) + (rawText.length > 30 ? '...' : '');\n    \n    debugLog('Checker', `Processing heading ${index + 1}: H${level} \"${headingText}\" (previous: H${previousLevel})`);\n    debugLog('Checker', `- innerHTML: ${heading.innerHTML.substring(0, 100)}`);\n    debugLog('Checker', `- textContent: \"${heading.textContent}\"`);\n    debugLog('Checker', `- trimmed length: ${rawText.length}`);\n    \n    // 空の見出しチェック（より厳密な判定）\n    const hasVisibleText = rawText.length > 0 && !/^\\s*$/.test(rawText);\n    \n    // H1が画像のみの場合の特別処理\n    const isImageOnlyH1 = level === 1 && !hasVisibleText && heading.children.length === 1 && \n                         heading.children[0].tagName === 'IMG' && \n                         heading.children[0].hasAttribute('alt') &&\n                         heading.children[0].getAttribute('alt').trim().length > 0;\n    \n    if (!hasVisibleText && !isImageOnlyH1) {\n      debugLog('Checker', `Empty heading detected: H${level}`);\n      debugLog('Checker', `- Raw text: \"${rawText}\"`);\n      debugLog('Checker', `- Has children: ${heading.children.length > 0}`);\n      \n      // 子要素がある場合は、本当にテキストがないか再確認\n      if (heading.children.length > 0) {\n        const childrenText = Array.from(heading.children).map(child => child.textContent.trim()).join('');\n        debugLog('Checker', `- Children text: \"${childrenText}\"`);\n        \n        // 子要素にもテキストがない場合のみ空と判定\n        if (childrenText.length === 0) {\n          problematicHeadings.push(heading);\n          headingStructureProblems.push({\n            element: heading,\n            problem: `H${level}が空です（テキスト内容がありません）`,\n            text: `実際のHTML:\\n${getElementFullHTML(heading)}`,\n            suggestion: `この見出し要素を削除するか、適切なテキストを追加してください`\n          });\n        }\n      } else {\n        // 子要素がなく、テキストもない場合\n        problematicHeadings.push(heading);\n        headingStructureProblems.push({\n          element: heading,\n          problem: `H${level}が空です（テキスト内容がありません）`,\n          text: `実際のHTML:\\n${getElementFullHTML(heading)}`,\n          suggestion: `この見出し要素を削除するか、適切なテキストを追加してください`\n        });\n      }\n    }\n    \n    // 画像のみのH1に対する警告（エラーではなく警告として）\n    if (isImageOnlyH1) {\n      debugLog('Checker', `Image-only H1 detected with alt text`);\n      problematicHeadings.push(heading);\n      headingStructureProblems.push({\n        element: heading,\n        problem: `H1が画像のみです（SEOとアクセシビリティの観点から改善推奨）`,\n        text: `実際のHTML:\\n${getElementFullHTML(heading)}`,\n        suggestion: `画像のH1をテキストベースのH1に変更することを推奨します：<h1>阪急ビューティーオンライン</h1>\\n画像は<img>タグとして別途配置してください。`\n      });\n    }\n    \n    // 不適切な複数タグ挿入のチェック\n    const childElements = heading.children;\n    const childTags = Array.from(childElements).map(el => el.tagName);\n    \n    // 複雑すぎる構造の検出条件を改善\n    const hasDeepNesting = checkDeepNesting(heading);\n    const hasTooManyChildren = childElements.length >= 5; // 5つ以上の子要素\n    const hasMultipleSameTypeTags = childTags.filter(tag => tag === 'SPAN').length >= 5 || // 5つ以上のSPAN\n                                    childTags.filter(tag => tag === 'DIV').length >= 3;   // 3つ以上のDIV\n    \n    // 単純なタグは除外\n    const hasOnlySimpleTags = childTags.length > 0 && childTags.every(tag => ALLOWED_SIMPLE_TAGS.includes(tag));\n    \n    // 単純なタグのみの場合は複雑な構造として扱わない\n    const isActuallyComplex = (hasDeepNesting || hasTooManyChildren || hasMultipleSameTypeTags) && !hasOnlySimpleTags;\n    \n    // デバッグ情報を追加\n    debugLog('Checker', `Analyzing H${level} structure:`);\n    debugLog('Checker', `- Children count: ${childElements.length}`);\n    debugLog('Checker', `- Child tags: ${childTags}`);\n    debugLog('Checker', `- SPAN count: ${childTags.filter(tag => tag === 'SPAN').length}`);\n    debugLog('Checker', `- DIV count: ${childTags.filter(tag => tag === 'DIV').length}`);\n    debugLog('Checker', `- Deep nesting check result: ${hasDeepNesting}`);\n    debugLog('Checker', `- Too many children: ${hasTooManyChildren}`);\n    debugLog('Checker', `- Multiple same type tags: ${hasMultipleSameTypeTags}`);\n    debugLog('Checker', `- Has only simple tags: ${hasOnlySimpleTags}`);\n    debugLog('Checker', `- Is actually complex: ${isActuallyComplex}`);\n    \n    if (isActuallyComplex) {\n      debugLog('Checker', `Complex heading structure detected: H${level}`);\n      debugLog('Checker', `- Deep nesting: ${hasDeepNesting}, Many children: ${hasTooManyChildren}, Multiple same tags: ${hasMultipleSameTypeTags}`);\n      \n      problematicHeadings.push(heading);\n      headingStructureProblems.push({\n        element: heading,\n        problem: `H${level}の構造が複雑すぎます（${childElements.length}個の子要素、または深いネスト構造）`,\n        text: `実際のHTML:\\n${getElementFullHTML(heading)}`,\n        suggestion: `見出しタグ内の構造をシンプルにしてください。推奨: <h${level}>シンプルなテキスト</h${level}> または <h${level}><span>装飾テキスト</span></h${level}>`\n      });\n    }\n    \n    // 装飾目的のH1チェック（フッターロゴなど）\n    if (level === 1 && (\n      heading.closest('footer') !== null ||\n      (heading.className.includes('footer') && heading.className.includes('logo'))\n    )) {\n      debugLog('Checker', `Decorative H1 detected in footer`);\n      problematicHeadings.push(heading);\n      headingStructureProblems.push({\n        element: heading,\n        problem: `H1がフッターに使用されています（装飾目的での不適切な使用）`,\n        text: `実際のHTML:\\n${getElementFullHTML(heading)}`,\n        suggestion: `フッターのロゴはdivやspanに変更し、ページ本文のメインタイトルにH1を使用してください`\n      });\n    }\n    \n    // 最初の要素でない場合のレベルジャンプチェック\n    if (index > 0 && level - previousLevel > 1) {\n      debugLog('Checker', `Level skip detected: H${previousLevel} → H${level}`);\n      problematicHeadings.push(heading);\n      headingStructureProblems.push({\n        element: heading,\n        problem: `H${previousLevel}の次にH${level}が来ています（H${previousLevel + 1}をスキップ）`,\n        text: `実際のHTML:\\n${getElementFullHTML(heading)}`,\n        suggestion: `H${level}をH${previousLevel + 1}に変更するか、不足している見出しレベルを追加してください`\n      });\n    }\n    \n    // H1が複数ある場合（装飾目的でない場合のみ）\n    if (level === 1 && index > 0 && !heading.className.includes('logo') && !heading.className.includes('footer')) {\n      const firstH1Index = Array.from(headings).findIndex(h => parseInt(h.tagName.charAt(1)) === 1);\n      if (index > firstH1Index) {\n        debugLog('Checker', `Multiple H1 detected at index ${index}`);\n        problematicHeadings.push(heading);\n        headingStructureProblems.push({\n          element: heading,\n          problem: `H1が複数存在します（ページに1つのH1のみ推奨）`,\n          text: `実際のHTML:\\n${getElementFullHTML(heading)}`,\n          suggestion: `H1をH2以下に変更するか、このH1を削除してください`\n        });\n      }\n    }\n    \n    // 見出しレベルの記録\n    // テキストがある見出しまたは画像のみのH1の場合はレベルを記録\n    if (hasVisibleText || isImageOnlyH1) {\n      previousLevel = level;\n      if (isImageOnlyH1) {\n        debugLog('Checker', `Image-only H1 detected, setting previousLevel to ${level} for proper hierarchy`);\n      }\n    }\n  });\n\n  debugLog('Checker', `Heading analysis complete. Problematic headings: ${problematicHeadings.length}`);\n  debugLog('Checker', 'Problematic headings:', problematicHeadings.map(h => ({ tag: h.tagName, text: h.textContent.trim().substring(0, 20) })));\n\n  if (problematicHeadings.length > 0) {\n    // 具体的な問題説明と解決策を生成\n    const detailedMessage = `${problematicHeadings.length}個の見出しで階層構造に問題があります。適切な見出し構造は、ページの内容を論理的に整理し、スクリーンリーダーユーザーのナビゲーションを改善します。`;\n    \n    issues.push({\n      category: 'heading',\n      severity: SEVERITY.WARNING,\n      rule: 'heading_structure',\n      name: '見出し構造の不適切',\n      message: detailedMessage,\n      elements: problematicHeadings,\n      solution: formatHeadingStructureSolution(headingStructureProblems)\n    });\n  }\n\n  return issues;\n}\n\n\n/**\n * H1欠落時の解決策テキストを取得\n * @returns {string} 解決策のテキスト\n */\nfunction getH1SolutionText() {\n  return `H1タグの追加方法:\n\n基本的な追加:\n<h1>ページのメインタイトル</h1>\n\n具体例:\n• 商品ページ: <h1>商品名</h1>\n• 記事ページ: <h1>記事タイトル</h1>  \n• サービスページ: <h1>サービス名</h1>\n• 会社情報: <h1>会社概要</h1>\n\n重要な注意点:\n• H1は1ページに1つだけ\n• ページの最も重要な内容を表す\n• ロゴやサイト名ではなく、そのページ固有の内容\n• 他の見出し（H2, H3等）より前に配置\n\n❌ 避けるべき例:\n<h1>ようこそ</h1>  ← 汎用的すぎる\n<h1>サイト名</h1>  ← サイト名はH1に不適切\n\n✅ 良い例:\n<h1>HTML セマンティックチェッカーの使い方</h1>  ← 具体的で有用`;\n}\n\n/**\n * 見出し構造の問題に対する解決策をフォーマット\n * @param {Array} problems - 見出しの問題リスト\n * @returns {string} フォーマットされた解決策テキスト\n */\nfunction formatHeadingStructureSolution(problems) {\n  const problemsByRule = {\n    emptyHeading: problems.filter(p => p.problem.includes('空です')),\n    logoH1: problems.filter(p => p.problem.includes('フッター')),\n    levelSkip: problems.filter(p => p.problem.includes('スキップ')),\n    multipleH1: problems.filter(p => p.problem.includes('複数存在')),\n    complexStructure: problems.filter(p => p.problem.includes('複雑すぎます'))\n  };\n\n  let solutionText = '';\n\n  // 各問題タイプごとに解決策を生成\n  if (problemsByRule.emptyHeading.length > 0) {\n    solutionText += formatProblemSection('空の見出しタグ', problemsByRule.emptyHeading, \n      '見出し要素を削除するか、適切なテキストを追加',\n      '<h1>ページタイトル</h1> または <div class=\"logo\">サイト名</div>',\n      'SEO効果なし、スクリーンリーダーで認識不可');\n  }\n\n  if (problemsByRule.logoH1.length > 0) {\n    solutionText += formatProblemSection('フッターでのH1使用', problemsByRule.logoH1,\n      'フッターのテキストは div または span に変更',\n      '<div class=\"footer__logo\">サイト名</div>',\n      'H1の意味が曖昧になり、SEOに悪影響');\n  }\n\n  // 他の問題タイプも同様にフォーマット...\n\n  return solutionText;\n}\n\n/**\n * 問題セクションをフォーマット\n * @param {string} title - 問題のタイトル\n * @param {Array} problems - 問題リスト\n * @param {string} solution - 解決方法\n * @param {string} example - 例\n * @param {string} impact - 影響\n * @returns {string} フォーマットされたセクション\n */\nfunction formatProblemSection(title, problems, solution, example, impact) {\n  return `🚨 問題: ${title} (${problems.length}個)\n${problems.map(p => `• ${p.text || '(空の要素)'}`).join('\\n')}\n\n🔧 修正方法: ${solution}\n✅ 例: ${example}\n📖 影響: ${impact}\n\n`;\n}","/**\n * アクセシビリティ分析モジュール\n */\n\nimport { SEVERITY, TRACKING_PIXEL_PATTERNS } from '../config.js';\nimport { isNonVisibleElement, isExcludedElement, getElementFullHTML } from '../utils/dom.js';\nimport { debugLog } from '../utils/debug.js';\n\n/**\n * アクセシビリティ全体の分析（プリプロセス済み要素を使用）\n * @param {Object} targetElements - プリプロセス済み要素（オプション）\n * @returns {Object} アクセシビリティ分析結果\n */\nexport function analyzeAccessibility(targetElements = null) {\n  // プリプロセス済み要素がある場合はそれを使用\n  if (targetElements) {\n    return {\n      images: {\n        total: targetElements.accessibility.images.length,\n        withoutAlt: targetElements.accessibility.imagesWithoutAlt.length,\n        withEmptyAlt: targetElements.accessibility.images.filter(img => img.getAttribute('alt') === '').length\n      },\n      links: {\n        total: targetElements.accessibility.links.length,\n        withoutText: targetElements.accessibility.links.filter(link => !link.textContent.trim()).length,\n        withoutAriaLabel: targetElements.accessibility.links.filter(link => \n          !link.hasAttribute('aria-label') && !link.hasAttribute('title')).length\n      },\n      forms: {\n        inputs: targetElements.accessibility.formElements.filter(el => el.tagName === 'INPUT').length,\n        inputsWithoutLabels: targetElements.accessibility.formElements.filter(el => \n          !el.hasAttribute('aria-label') && !el.hasAttribute('aria-labelledby')).length,\n        textareas: targetElements.accessibility.formElements.filter(el => el.tagName === 'TEXTAREA').length\n      },\n      landmarks: {\n        hasSkipLink: !!document.querySelector('a[href=\"#main\"], a[href=\"#content\"]'),\n        hasMainLandmark: document.querySelectorAll('main, [role=\"main\"]').length > 0\n      }\n    };\n  }\n  \n  // フォールバック：従来の方式\n  return {\n    images: {\n      total: document.querySelectorAll('img').length,\n      withoutAlt: document.querySelectorAll('img:not([alt])').length,\n      withEmptyAlt: document.querySelectorAll('img[alt=\"\"]').length\n    },\n    links: {\n      total: document.querySelectorAll('a').length,\n      withoutText: document.querySelectorAll('a:empty').length,\n      withoutAriaLabel: document.querySelectorAll('a:not([aria-label]):not([title])').length\n    },\n    forms: {\n      inputs: document.querySelectorAll('input').length,\n      inputsWithoutLabels: document.querySelectorAll('input:not([aria-label]):not([aria-labelledby])').length,\n      textareas: document.querySelectorAll('textarea').length\n    },\n    landmarks: {\n      hasSkipLink: !!document.querySelector('a[href=\"#main\"], a[href=\"#content\"]'),\n      hasMainLandmark: document.querySelectorAll('main, [role=\"main\"]').length > 0\n    }\n  };\n}\n\n/**\n * アクセシビリティ関連の問題を検出（プリプロセス済み要素を使用）\n * @param {Object} targetElements - プリプロセス済み要素（オプション）\n * @returns {Array} 検出された問題のリスト\n */\nexport function detectAccessibilityIssues(targetElements = null) {\n  const issues = [];\n\n  // alt属性チェック\n  const altIssues = checkImageAltAttributes(targetElements);\n  issues.push(...altIssues);\n\n  // フォームラベルチェック\n  const formLabelIssues = checkFormLabels(targetElements);\n  issues.push(...formLabelIssues);\n\n  // ARIA属性チェック\n  const ariaIssues = checkAriaAttributes(targetElements);\n  issues.push(...ariaIssues);\n\n  // 必須ARIA属性チェック\n  const ariaRequiredIssues = checkAriaRequired(targetElements);\n  issues.push(...ariaRequiredIssues);\n\n  // リンクのアクセシビリティチェック\n  const linkIssues = checkLinkAccessibility(targetElements);\n  issues.push(...linkIssues);\n\n  // レイアウトテーブルチェック\n  const tableIssues = checkLayoutTables(targetElements);\n  issues.push(...tableIssues);\n\n  return issues;\n}\n\n/**\n * 画像のalt属性をチェック（プリプロセス済み要素を使用）\n * @param {Object} targetElements - プリプロセス済み要素（オプション）\n * @returns {Array} alt属性に関する問題リスト\n */\nfunction checkImageAltAttributes(targetElements = null) {\n  const issues = [];\n  \n  // プリプロセス済み要素がある場合はそれを使用\n  const imagesWithoutAlt = targetElements ? \n    targetElements.accessibility.imagesWithoutAlt : \n    Array.from(document.querySelectorAll('img:not([alt])')).filter(img => !isExcludedElement(img));\n  \n  debugLog('Checker', 'Images without alt found:', imagesWithoutAlt.length);\n  \n  // トラッキングピクセルを除外（プリプロセス済みの場合は既に除外済み）\n  const filteredImages = targetElements ? \n    imagesWithoutAlt.filter(img => {\n      // プリプロセス済みの場合は除外チェックは不要、トラッキングピクセルのみチェック\n      const src = img.src || img.getAttribute('src') || '';\n      const isTrackingUrl = TRACKING_PIXEL_PATTERNS.some(pattern => pattern.test(src));\n      \n      // サイズチェック（1x1ピクセル）\n      const is1x1Pixel = (img.width === 1 && img.height === 1) || \n                        (img.naturalWidth === 1 && img.naturalHeight === 1) ||\n                        (img.getAttribute('width') === '1' && img.getAttribute('height') === '1');\n      \n      // 隠し要素チェック\n      const computedStyle = window.getComputedStyle(img);\n      const isHidden = computedStyle.display === 'none' || \n                      computedStyle.visibility === 'hidden' ||\n                      img.style.display === 'none' ||\n                      img.style.visibility === 'hidden';\n      \n      return !isTrackingUrl && !is1x1Pixel && !isHidden;\n    }) :\n    imagesWithoutAlt.filter(img => {\n      // 従来の方式：すべてのチェックを実行\n    // URLチェック\n    const src = img.src || img.getAttribute('src') || '';\n    const isTrackingUrl = TRACKING_PIXEL_PATTERNS.some(pattern => pattern.test(src));\n    \n    // サイズチェック（1x1ピクセル）\n    const is1x1Pixel = (img.width === 1 && img.height === 1) || \n                      (img.naturalWidth === 1 && img.naturalHeight === 1) ||\n                      (img.getAttribute('width') === '1' && img.getAttribute('height') === '1');\n    \n    // 隠し要素チェック\n    const computedStyle = window.getComputedStyle(img);\n    const isHidden = computedStyle.display === 'none' || \n                    computedStyle.visibility === 'hidden' ||\n                    img.style.display === 'none' ||\n                    img.style.visibility === 'hidden';\n    \n    // トラッキングピクセルでない場合のみ含める\n    return !isTrackingUrl && !is1x1Pixel && !isHidden;\n  });\n\n  debugLog('Checker', 'After filtering tracking pixels:', filteredImages.length);\n\n  if (filteredImages.length > 0) {\n    issues.push({\n      category: 'accessibility',\n      severity: SEVERITY.ERROR,\n      rule: 'missing_alt',\n      name: '画像のalt属性欠落',\n      message: `${filteredImages.length}個の画像にalt属性がありません。視覚障害のあるユーザーがスクリーンリーダーで画像の内容を理解できません。SEO的にも検索エンジンが画像を認識できません。`,\n      elements: filteredImages,\n      solution: getAltAttributeSolution()\n    });\n  }\n\n  return issues;\n}\n\n/**\n * フォーム要素のラベルをチェック\n * @returns {Array} ラベルに関する問題リスト\n */\nfunction checkFormLabels() {\n  const issues = [];\n  const formElements = document.querySelectorAll('input:not([type=\"hidden\"]):not([type=\"submit\"]):not([type=\"button\"]), select, textarea');\n  \n  const missingLabels = Array.from(formElements).filter(el => {\n    // 除外対象要素を除外\n    if (isExcludedElement(el)) {\n      return false;\n    }\n    const hasLabel = el.id && document.querySelector(`label[for=\"${el.id}\"]`) !== null;\n    const hasAriaLabel = el.hasAttribute('aria-label');\n    const hasAriaLabelledby = el.hasAttribute('aria-labelledby');\n    const hasPlaceholder = el.hasAttribute('placeholder');\n    const hasTitle = el.hasAttribute('title');\n    \n    // 検索フィールドなど、コンテキストが明確な要素を除外\n    const isSearchField = el.name === 'q' || \n                         el.name === 'search' || \n                         el.id?.includes('search') || \n                         el.className?.includes('search');\n    \n    return !hasLabel && !hasAriaLabel && !hasAriaLabelledby && \n           !hasPlaceholder && !hasTitle && !isSearchField;\n  });\n  \n  if (missingLabels.length > 0) {\n    issues.push({\n      category: 'accessibility',\n      severity: SEVERITY.ERROR,\n      rule: 'missing_form_labels',\n      name: 'フォーム要素のラベル不足',\n      message: `${missingLabels.length}個のフォーム要素にアクセシブルなラベルがありません。`,\n      elements: missingLabels,\n      solution: getFormLabelSolution()\n    });\n  }\n\n  return issues;\n}\n\n/**\n * ARIA属性をチェック\n * @returns {Array} ARIA属性に関する問題リスト\n */\nfunction checkAriaAttributes() {\n  const issues = [];\n\n  // aria-expandedチェック\n  const expandableSelectors = [\n    'button[data-toggle]',\n    '[role=\"button\"][data-toggle]',\n    'details summary',\n    '.dropdown-toggle',\n    '.accordion-toggle',\n    '[aria-controls]'\n  ];\n  \n  const expandableElements = document.querySelectorAll(expandableSelectors.join(', '));\n  const missingAriaExpanded = Array.from(expandableElements).filter(el => {\n    if (el.tagName === 'SUMMARY') return false; // details要素は除外\n    return !el.hasAttribute('aria-expanded');\n  });\n  \n  if (missingAriaExpanded.length > 0) {\n    issues.push({\n      category: 'accessibility',\n      severity: SEVERITY.WARNING,\n      rule: 'missing_aria_expanded',\n      name: 'インタラクティブ要素のARIA展開状態不足',\n      message: `${missingAriaExpanded.length}個のインタラクティブ要素にaria-expanded属性が不足しています`,\n      elements: missingAriaExpanded,\n      solution: getAriaExpandedSolution()\n    });\n  }\n\n  // aria-currentチェック\n  const navigationLinks = document.querySelectorAll('nav a, .breadcrumb a, .pagination a');\n  const missingAriaCurrent = Array.from(navigationLinks).filter(link => {\n    const hasActiveClass = link.classList.contains('active') || \n                          link.classList.contains('current');\n    const isSameUrl = link.href === window.location.href;\n    \n    return (hasActiveClass || isSameUrl) && !link.hasAttribute('aria-current');\n  });\n  \n  if (missingAriaCurrent.length > 0) {\n    issues.push({\n      category: 'accessibility',\n      severity: SEVERITY.WARNING,\n      rule: 'missing_aria_current',\n      name: '現在位置のARIA属性不足',\n      message: `${missingAriaCurrent.length}個のアクティブなナビゲーションリンクにaria-current属性が不足しています`,\n      elements: missingAriaCurrent,\n      solution: getAriaCurrentSolution()\n    });\n  }\n\n  return issues;\n}\n\n/**\n * 必須ARIA属性をチェック（元の実装）\n * @returns {Array} 必須ARIA属性に関する問題リスト\n */\nfunction checkAriaRequired() {\n  const issues = [];\n\n  // role属性に基づく必須ARIA属性チェック\n  const elementsWithRole = document.querySelectorAll('[role]');\n  const missingRequired = [];\n\n  Array.from(elementsWithRole).forEach(element => {\n    // 除外対象要素を除外\n    if (isExcludedElement(element)) {\n      return;\n    }\n    \n    const role = element.getAttribute('role');\n    \n    // roleに応じた必須属性をチェック\n    switch (role) {\n      case 'button':\n        if (!element.hasAttribute('aria-label') && \n            !element.hasAttribute('aria-labelledby') && \n            !element.textContent.trim()) {\n          missingRequired.push(element);\n        }\n        break;\n      case 'tab':\n        if (!element.hasAttribute('aria-selected')) {\n          missingRequired.push(element);\n        }\n        break;\n      case 'tabpanel':\n        if (!element.hasAttribute('aria-labelledby')) {\n          missingRequired.push(element);\n        }\n        break;\n      case 'slider':\n        if (!element.hasAttribute('aria-valuenow') || \n            !element.hasAttribute('aria-valuemin') || \n            !element.hasAttribute('aria-valuemax')) {\n          missingRequired.push(element);\n        }\n        break;\n      case 'progressbar':\n        if (!element.hasAttribute('aria-valuenow')) {\n          missingRequired.push(element);\n        }\n        break;\n    }\n  });\n\n  if (missingRequired.length > 0) {\n    issues.push({\n      category: 'accessibility',\n      severity: SEVERITY.ERROR,\n      rule: 'missing_aria_required',\n      name: '必須ARIA属性不足',\n      message: `${missingRequired.length}個の要素に必須のARIA属性が不足しています。roleに応じた適切なARIA属性を設定してください。`,\n      elements: missingRequired,\n      solution: getAriaRequiredSolution()\n    });\n  }\n\n  return issues;\n}\n\n/**\n * 必須ARIA属性の解決策テキスト\n * @returns {string} 解決策のテキスト\n */\nfunction getAriaRequiredSolution() {\n  return `必須ARIA属性の設定方法:\n\nroleに応じた必須属性:\n\n1. role=\"button\"の場合:\n<div role=\"button\" aria-label=\"送信\">送信</div>\nまたは\n<div role=\"button\" aria-labelledby=\"btn-label\">\n  <span id=\"btn-label\">送信</span>\n</div>\n\n2. role=\"tab\"の場合:\n<div role=\"tab\" aria-selected=\"true\">タブ1</div>\n<div role=\"tab\" aria-selected=\"false\">タブ2</div>\n\n3. role=\"tabpanel\"の場合:\n<div role=\"tabpanel\" aria-labelledby=\"tab1\">\n  タブパネルの内容\n</div>\n\n4. role=\"slider\"の場合:\n<div role=\"slider\" \n     aria-valuenow=\"50\" \n     aria-valuemin=\"0\" \n     aria-valuemax=\"100\"\n     aria-label=\"音量\">\n</div>\n\n5. role=\"progressbar\"の場合:\n<div role=\"progressbar\" \n     aria-valuenow=\"70\" \n     aria-valuemin=\"0\" \n     aria-valuemax=\"100\"\n     aria-label=\"進捗\">\n</div>\n\n重要なポイント:\n• roleを設定したら対応する必須属性も設定\n• 視覚的な情報をARIA属性で補完\n• 動的な値の変更時はJavaScriptで属性も更新\n• スクリーンリーダーでの読み上げを考慮\n\n❌ 悪い例:\n<div role=\"button\">ボタン</div>  ← aria-labelなし\n\n✅ 良い例:\n<div role=\"button\" aria-label=\"メニューを開く\">☰</div>`;\n}\n\n/**\n * リンクのアクセシビリティをチェック（元の実装を復元）\n * @returns {Array} リンクに関する問題リスト\n */\nfunction checkLinkAccessibility() {\n  const issues = [];\n  \n  // リンクのボタン化チェック（改善版）\n  const problematicLinksSet = new Set();\n  const links = document.querySelectorAll('a');\n  \n  Array.from(links).forEach(link => {\n    // 除外対象要素を除外\n    if (isExcludedElement(link)) {\n      return;\n    }\n    \n    const href = link.getAttribute('href');\n    const onclick = link.getAttribute('onclick');\n    const hasJSAction = onclick !== null || link.onclick !== null;\n    \n    // 以下の場合は問題として検出\n    // 1. href が空/# + JavaScriptアクションあり\n    // 2. javascript:void(0) を使用（JavaScriptアクションの有無に関わらず）\n    const isButtonMisuse = (!href || href === '#') && hasJSAction;\n    const hasJSVoid = href === 'javascript:void(0)';\n    \n    if (isButtonMisuse || hasJSVoid) {\n      problematicLinksSet.add(link);\n    }\n  });\n  \n  const problematicLinks = Array.from(problematicLinksSet);\n  \n  if (problematicLinks.length > 0) {\n    issues.push({\n      category: 'accessibility',\n      severity: SEVERITY.ERROR,\n      rule: 'link_button_misuse',\n      name: 'リンクのボタン化',\n      message: `${problematicLinks.length}個のリンクがボタンとして誤用されています。href=\"#\"やjavascript:void(0)を使用せず、適切な<button>タグまたは有効なURLを使用してください。`,\n      elements: problematicLinks,\n      solution: getLinkButtonMisuseSolution()\n    });\n  }\n\n  return issues;\n}\n\n/**\n * リンクボタン誤用の解決策テキスト（元の実装）\n * @returns {string} 解決策のテキスト\n */\nfunction getLinkButtonMisuseSolution() {\n  return `リンクのボタン化の修正方法:\n\n❌ 現在（リンクのボタン化）:\n<a href=\"#\" onclick=\"doSomething()\">ボタン</a>\n<a href=\"javascript:void(0)\" onclick=\"action()\">アクション</a>\n\n✅ 修正後（適切なボタン）:\n<button type=\"button\" onclick=\"doSomething()\">ボタン</button>\n<button type=\"button\" onclick=\"action()\">アクション</button>\n\n正しい使い分け:\n• ページ移動・外部リンク → <a href=\"url\">リンク</a>\n• JavaScript実行・フォーム操作 → <button>ボタン</button>\n\n具体的な修正例:\n❌ <a href=\"#\" onclick=\"toggleMenu()\">メニュー</a>\n✅ <button type=\"button\" onclick=\"toggleMenu()\">メニュー</button>\n\n❌ <a href=\"javascript:void(0)\" onclick=\"submitForm()\">送信</a>\n✅ <button type=\"submit\" onclick=\"submitForm()\">送信</button>\n\n重要なポイント:\n• スクリーンリーダーでリンクとボタンは異なる読み上げ\n• キーボードナビゲーションでの挙動が違う\n• セマンティックHTMLの観点から適切な要素を使用\n• アクセシビリティとユーザビリティの向上\n\nSEO・アクセシビリティへの影響:\n• 検索エンジンがページ構造を正しく理解\n• 支援技術での適切なナビゲーション\n• ユーザーエクスペリエンスの向上`;\n}\n\n/**\n * ARIA展開状態の解決策テキスト\n * @returns {string} 解決策のテキスト\n */\nfunction getAriaExpandedSolution() {\n  return `ARIA展開状態の設定方法:\n\n基本的な設定:\n<button aria-expanded=\"false\" aria-controls=\"menu\">メニュー</button>\n<ul id=\"menu\" style=\"display: none;\">...</ul>\n\nドロップダウンメニューの例:\n<button aria-expanded=\"false\" onclick=\"toggleMenu()\">\n  ドロップダウン\n</button>\n\nアコーディオンの例:\n<button aria-expanded=\"false\" aria-controls=\"content1\">\n  セクション1\n</button>\n<div id=\"content1\" style=\"display: none;\">内容</div>\n\nJavaScript設定例:\nfunction toggleMenu() {\n  const button = document.querySelector('[aria-controls=\"menu\"]');\n  const menu = document.getElementById('menu');\n  const isExpanded = button.getAttribute('aria-expanded') === 'true';\n  \n  button.setAttribute('aria-expanded', !isExpanded);\n  menu.style.display = isExpanded ? 'none' : 'block';\n}\n\n重要なポイント:\n• true/falseの文字列で設定\n• 展開・収縮時に動的に更新\n• aria-controlsと組み合わせて使用\n\n❌ 悪い例:\n<button onclick=\"toggleMenu()\">メニュー</button>  ← aria-expanded なし\n\n✅ 良い例:\n<button aria-expanded=\"false\" aria-controls=\"menu\">メニュー</button>`;\n}\n\n/**\n * ARIA現在位置の解決策テキスト\n * @returns {string} 解決策のテキスト\n */\nfunction getAriaCurrentSolution() {\n  return `ARIA現在位置の設定方法:\n\n基本的な設定:\n<nav>\n  <a href=\"/home\">ホーム</a>\n  <a href=\"/about\" aria-current=\"page\">会社概要</a>\n  <a href=\"/contact\">お問い合わせ</a>\n</nav>\n\nパンくずリストの例:\n<nav aria-label=\"パンくずリスト\">\n  <a href=\"/\">ホーム</a> &gt;\n  <a href=\"/category\">カテゴリ</a> &gt;\n  <span aria-current=\"page\">商品詳細</span>\n</nav>\n\nページネーションの例:\n<nav aria-label=\"ページネーション\">\n  <a href=\"?page=1\">1</a>\n  <span aria-current=\"page\">2</span>\n  <a href=\"?page=3\">3</a>\n</nav>\n\naria-current の値:\n• page: 現在のページ\n• step: 多段階プロセスの現在のステップ\n• location: 現在の場所\n• date: 現在の日付\n• time: 現在の時刻\n• true: その他の現在項目\n\n重要なポイント:\n• 現在位置を明確に示す\n• スクリーンリーダーで「現在のページ」と読み上げ\n• CSSでの視覚的なスタイリングと組み合わせ\n\n❌ 悪い例:\n<a href=\"/current\" class=\"active\">現在のページ</a>  ← aria-current なし\n\n✅ 良い例:\n<a href=\"/current\" class=\"active\" aria-current=\"page\">現在のページ</a>`;\n}\n\n/**\n * レイアウトテーブルの解決策テキスト\n * @returns {string} 解決策のテキスト\n */\nfunction getLayoutTableSolution() {\n  return `レイアウト目的のtable使用の修正方法:\n\n❌ 現在（レイアウト目的）:\n<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n  <tr>\n    <td>左カラム</td>\n    <td>右カラム</td>\n  </tr>\n</table>\n\n✅ 修正後（CSSレイアウト）:\n<div class=\"layout-container\">\n  <div class=\"left-column\">左カラム</div>\n  <div class=\"right-column\">右カラム</div>\n</div>\n\nCSS例:\n.layout-container {\n  display: flex;\n  gap: 20px;\n}\n.left-column, .right-column {\n  flex: 1;\n}\n\nまたはCSS Grid:\n.layout-container {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 20px;\n}\n\nデータテーブルの正しい使用例:\n<table>\n  <caption>売上データ</caption>\n  <thead>\n    <tr>\n      <th>月</th>\n      <th>売上</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>1月</td>\n      <td>100万円</td>\n    </tr>\n  </tbody>\n</table>\n\n重要なポイント:\n• tableは表形式データにのみ使用\n• レイアウトはCSS（flexbox, grid）を使用\n• スクリーンリーダーがテーブルとして誤認識される問題を解決\n\n❌ レイアウト用table\n✅ CSS flexbox/grid + セマンティックHTML`;\n}\n\n/**\n * レイアウト目的のテーブルをチェック\n * @returns {Array} テーブルに関する問題リスト\n */\nfunction checkLayoutTables() {\n  const issues = [];\n  const tables = document.querySelectorAll('table');\n  \n  const layoutTables = Array.from(tables).filter(table => {\n    const hasLayoutIndicators = table.hasAttribute('cellpadding') || \n                               table.hasAttribute('cellspacing') || \n                               (table.hasAttribute('border') && table.getAttribute('border') === '0');\n    \n    const hasTableHeaders = table.querySelectorAll('th').length > 0;\n    const hasCaption = table.querySelector('caption') !== null;\n    const hasDataIndicators = hasTableHeaders || hasCaption;\n    \n    return hasLayoutIndicators && !hasDataIndicators;\n  });\n  \n  if (layoutTables.length > 0) {\n    issues.push({\n      category: 'accessibility',\n      severity: SEVERITY.ERROR,\n      rule: 'layout_table_usage',\n      name: 'レイアウト目的のtable使用',\n      message: `${layoutTables.length}個のテーブルがレイアウト目的で使用されています`,\n      elements: layoutTables,\n      solution: getLayoutTableSolution()\n    });\n  }\n\n  return issues;\n}\n\n/**\n * alt属性の解決策テキスト\n * @returns {string} 解決策のテキスト\n */\nfunction getAltAttributeSolution() {\n  return `alt属性の正しい設定方法:\n\n基本的な設定:\n<img src=\"image.jpg\" alt=\"画像の説明\">\n\n画像の種類別の例:\n• 商品画像: <img src=\"shoes.jpg\" alt=\"黒いランニングシューズ\">\n• 人物写真: <img src=\"person.jpg\" alt=\"スーツを着た男性が笑顔で立っている\">\n• 図表・グラフ: <img src=\"chart.jpg\" alt=\"2024年売上推移グラフ、前年比120%増加\">\n• ロゴ: <img src=\"logo.jpg\" alt=\"ABC会社ロゴ\">\n• 装飾画像: <img src=\"decoration.jpg\" alt=\"\">（空文字でOK）\n\n重要なルール:\n• 画像が見えない状況でも内容が伝わる説明\n• 単に「画像」「写真」と書かない\n• 装飾目的の場合は alt=\"\" を使用\n• 長い説明が必要な場合は別途説明文を用意\n\n❌ 悪い例:\n<img src=\"product.jpg\" alt=\"画像\">  ← 何の画像か不明\n<img src=\"chart.jpg\" alt=\"グラフ\">  ← 内容が不明\n\n✅ 良い例:\n<img src=\"product.jpg\" alt=\"青いデニムジャケット Mサイズ\">\n<img src=\"chart.jpg\" alt=\"月別売上グラフ：1月100万円から12月500万円まで右肩上がり\">`;\n}\n\n/**\n * フォームラベルの解決策テキスト\n * @returns {string} 解決策のテキスト\n */\nfunction getFormLabelSolution() {\n  return `フォーム要素のラベル設定方法:\n\n基本的な設定:\n<label for=\"username\">ユーザー名</label>\n<input type=\"text\" id=\"username\" name=\"username\">\n\n代替方法:\n1. aria-label属性を使用:\n<input type=\"email\" aria-label=\"メールアドレス\">\n\n2. aria-labelledby属性を使用:\n<h3 id=\"billing\">請求先情報</h3>\n<input type=\"text\" aria-labelledby=\"billing\">\n\n3. placeholder + title の組み合わせ:\n<input type=\"text\" placeholder=\"例: yamada@example.com\" title=\"メールアドレスを入力\">\n\n重要なポイント:\n• 全てのフォーム要素に適切なラベルが必要\n• ラベルはフォーム要素の目的を明確に示す\n• placeholderだけでは不十分（消えてしまうため）\n\n❌ 悪い例:\n<input type=\"text\">  ← ラベルが全くない\n<input type=\"email\" placeholder=\"メール\">  ← placeholderのみ\n\n✅ 良い例:\n<label for=\"email\">メールアドレス</label>\n<input type=\"email\" id=\"email\" placeholder=\"例: user@example.com\">`;\n}","/**\n * セマンティックHTML分析モジュール\n */\n\nimport { SEVERITY } from '../config.js';\nimport { debugLog } from '../utils/debug.js';\n\n/**\n * セマンティック関連の問題を検出\n * @param {Object} targetElements - プリプロセス済み要素（オプション）\n * @returns {Array} 検出された問題のリスト\n */\nexport function detectSemanticIssues(targetElements = null) {\n  const issues = [];\n\n  // 日付情報のDIVタグ使用チェック\n  const dateIssues = checkDateInformation(targetElements);\n  issues.push(...dateIssues);\n\n  return issues;\n}\n\n/**\n * DIVタグで日付情報を表現している箇所をチェック\n * @returns {Array} 日付情報に関する問題リスト\n */\nfunction checkDateInformation() {\n  const issues = [];\n  const divElements = document.querySelectorAll('div');\n  const problematicElements = [];\n\n  // 日付パターン（元の実装から復元）\n  const datePatterns = [\n    /\\b\\d{4}[-\\/]\\d{1,2}[-\\/]\\d{1,2}\\b/,  // 2023-01-15, 2023/01/15\n    /\\b\\d{1,2}[-\\/]\\d{1,2}[-\\/]\\d{4}\\b/,  // 15-01-2023, 15/01/2023\n    /\\b\\d{4}年\\d{1,2}月\\d{1,2}日\\b/,      // 2023年1月15日\n    /\\b\\d{1,2}月\\d{1,2}日\\b/,             // 1月15日\n    /\\b(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\\s+\\d{1,2},?\\s+\\d{4}\\b/i, // Jan 15, 2023\n    /\\b\\d{1,2}\\s+(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\\s+\\d{4}\\b/i     // 15 Jan 2023\n  ];\n\n  Array.from(divElements).forEach(div => {\n    const text = div.textContent.trim();\n    \n    // 日付パターンに一致し、すでにtimeタグで囲まれていない場合\n    if (datePatterns.some(pattern => pattern.test(text))) {\n      // timeタグが子要素にないかチェック\n      const hasTimeTag = div.querySelector('time') !== null;\n      // divの親がすでにtimeタグでないかチェック\n      const isInTimeTag = div.closest('time') !== null;\n      \n      if (!hasTimeTag && !isInTimeTag && text.length < 100) { // 長すぎるテキストは除外\n        debugLog('Checker', `Date pattern found in div: ${text.substring(0, 50)}`);\n        problematicElements.push(div);\n      }\n    }\n  });\n\n  if (problematicElements.length > 0) {\n    issues.push({\n      category: 'structure',\n      severity: SEVERITY.WARNING,\n      rule: 'date_in_div',\n      name: 'DIVタグでの日付情報表現',\n      message: `${problematicElements.length}個のDIVタグで日付情報が表現されています。意味的により適切な<time>タグの使用を検討してください。`,\n      elements: problematicElements,\n      solution: getDateInformationSolution()\n    });\n  }\n\n  return issues;\n}\n\n/**\n * 日付情報の解決策テキスト\n * @returns {string} 解決策のテキスト\n */\nfunction getDateInformationSolution() {\n  return `日付情報の適切な表現方法:\n\n🚨 問題: <div>2023年1月15日</div>\n🔧 修正: <time datetime=\"2023-01-15\">2023年1月15日</time>\n\n✅ 正しい使用例:\n• <time datetime=\"2023-01-15\">2023年1月15日</time>\n• <time datetime=\"2023-01-15T10:30:00\">2023年1月15日 10:30</time>\n• <time datetime=\"2023-01\">2023年1月</time>\n\n📖 影響: \n• 検索エンジンが日付情報を正しく認識\n• スクリーンリーダーで日付として適切に読み上げ\n• 構造化データとしてより意味的に正確`;\n}","/**\n * コードクリーンアップ分析モジュール\n */\n\nimport { SEVERITY, LEGACY_GA_PATTERNS, ADOBE_PATTERNS } from '../config.js';\nimport { debugLog } from '../utils/debug.js';\n\n/**\n * クリーンアップ関連の問題を検出\n * @param {Object} targetElements - プリプロセス済み要素（オプション）\n * @returns {Array} 検出された問題のリスト\n */\nexport function detectCleanupIssues(targetElements = null) {\n  const issues = [];\n\n  // 古いGoogle Analytics検知\n  const gaIssues = checkLegacyGoogleAnalytics(targetElements);\n  issues.push(...gaIssues);\n\n  // 古いGTMコンテナ検知\n  const gtmIssues = checkLegacyGTMContainer(targetElements);\n  issues.push(...gtmIssues);\n\n  // Adobe Analytics検知\n  const adobeIssues = checkAdobeAnalytics(targetElements);\n  issues.push(...adobeIssues);\n\n  // 不要なnoscriptタグ検知\n  const noscriptIssues = checkUnnecessaryNoScript(targetElements);\n  issues.push(...noscriptIssues);\n\n  // 古いROBOTSメタタグ検知\n  const robotsIssues = checkOldRobotsMetaTags();\n  issues.push(...robotsIssues);\n\n  // 廃止されたmetaタグ検知\n  const deprecatedMetaIssues = checkDeprecatedMetaTags();\n  issues.push(...deprecatedMetaIssues);\n\n  return issues;\n}\n\n/**\n * 古いGoogle Analyticsコードをチェック\n * @returns {Array} 古いGA関連の問題リスト\n */\nfunction checkLegacyGoogleAnalytics() {\n  const issues = [];\n  const scripts = document.querySelectorAll('script');\n  const problematicScripts = [];\n\n  Array.from(scripts).forEach(script => {\n    const content = script.textContent || script.innerHTML || '';\n    const src = script.src || '';\n    \n    // UAパターンまたは古いGA JSファイルをチェック\n    const hasLegacyPattern = LEGACY_GA_PATTERNS.some(pattern => \n      pattern.test(content) || pattern.test(src)\n    );\n    \n    if (hasLegacyPattern) {\n      debugLog('Checker', 'Legacy GA code detected:', content.substring(0, 100));\n      problematicScripts.push(script);\n    }\n  });\n\n  if (problematicScripts.length > 0) {\n    issues.push({\n      category: 'cleanup',\n      severity: SEVERITY.WARNING,\n      rule: 'legacy_google_analytics',\n      name: '古いGoogle Analyticsコード',\n      message: `${problematicScripts.length}個の古いGoogle Analytics（UA-）コードが検出されました。Google Analytics 4（GA4）への移行を検討してください。`,\n      elements: problematicScripts,\n      solution: getLegacyGASolution()\n    });\n  }\n\n  return issues;\n}\n\n/**\n * 古いGTMコンテナをチェック\n * @returns {Array} 古いGTM関連の問題リスト\n */\nfunction checkLegacyGTMContainer() {\n  const issues = [];\n  const scripts = document.querySelectorAll('script');\n  const problematicScripts = [];\n\n  // 特定の古いGTMコンテナIDをチェック（元の実装から）\n  const legacyGTMPattern = /GTM-[A-Z0-9]{6,7}/g;\n\n  Array.from(scripts).forEach(script => {\n    const content = script.textContent || script.innerHTML || '';\n    const src = script.src || '';\n    \n    if (legacyGTMPattern.test(content) || legacyGTMPattern.test(src)) {\n      // ここで特定の古いコンテナIDかどうかを判定\n      const matches = (content + src).match(legacyGTMPattern);\n      if (matches) {\n        debugLog('Checker', 'GTM container detected:', matches);\n        problematicScripts.push(script);\n      }\n    }\n  });\n\n  if (problematicScripts.length > 0) {\n    issues.push({\n      category: 'cleanup',\n      severity: SEVERITY.INFO,\n      rule: 'legacy_gtm_container',\n      name: '古いGTMコンテナの可能性',\n      message: `${problematicScripts.length}個のGoogle Tag Managerコンテナが検出されました。使用していない古いコンテナがないか確認してください。`,\n      elements: problematicScripts,\n      solution: getLegacyGTMSolution()\n    });\n  }\n\n  return issues;\n}\n\n/**\n * Adobe Analyticsコードをチェック\n * @returns {Array} Adobe Analytics関連の問題リスト\n */\nfunction checkAdobeAnalytics() {\n  const issues = [];\n  const scripts = document.querySelectorAll('script');\n  const problematicScripts = [];\n\n  Array.from(scripts).forEach(script => {\n    const content = script.textContent || script.innerHTML || '';\n    const src = script.src || '';\n    \n    const hasAdobePattern = ADOBE_PATTERNS.some(pattern => \n      pattern.test(content) || pattern.test(src)\n    );\n    \n    if (hasAdobePattern) {\n      debugLog('Checker', 'Adobe Analytics code detected:', content.substring(0, 100));\n      problematicScripts.push(script);\n    }\n  });\n\n  if (problematicScripts.length > 0) {\n    issues.push({\n      category: 'cleanup',\n      severity: SEVERITY.INFO,\n      rule: 'adobe_analytics_code',\n      name: 'Adobe Analyticsコード',\n      message: `${problematicScripts.length}個のAdobe Analytics/Omnitureコードが検出されました。使用していない場合は削除を検討してください。`,\n      elements: problematicScripts,\n      solution: getAdobeAnalyticsSolution()\n    });\n  }\n\n  return issues;\n}\n\n/**\n * 不要なnoscriptタグをチェック\n * @returns {Array} noscript関連の問題リスト\n */\nfunction checkUnnecessaryNoScript() {\n  const issues = [];\n  const noscriptTags = document.querySelectorAll('noscript');\n  const problematicTags = [];\n\n  Array.from(noscriptTags).forEach(noscript => {\n    const content = noscript.innerHTML.trim();\n    \n    // 空または<!-- -->コメントのみの場合\n    const isEmpty = content === '' || /^<!--.*-->$/.test(content.replace(/\\s/g, ''));\n    \n    if (isEmpty) {\n      debugLog('Checker', 'Empty noscript tag detected');\n      problematicTags.push(noscript);\n    }\n  });\n\n  if (problematicTags.length > 0) {\n    issues.push({\n      category: 'cleanup',\n      severity: SEVERITY.INFO,\n      rule: 'unnecessary_noscript',\n      name: '不要なnoscriptタグ',\n      message: `${problematicTags.length}個の空または不要なnoscriptタグが検出されました。`,\n      elements: problematicTags,\n      solution: getUnnecessaryNoScriptSolution()\n    });\n  }\n\n  return issues;\n}\n\n/**\n * 古いROBOTSメタタグをチェック\n * @returns {Array} ROBOTS関連の問題リスト\n */\nfunction checkOldRobotsMetaTags() {\n  const issues = [];\n  const metaTags = document.querySelectorAll('meta[name=\"robots\"]');\n  const problematicTags = [];\n\n  Array.from(metaTags).forEach(meta => {\n    const content = meta.getAttribute('content') || '';\n    \n    // 古いROBOTSディレクティブをチェック\n    const hasOldDirectives = /\\b(NOODP|NOYDIR|NOARCHIVE)\\b/i.test(content);\n    \n    if (hasOldDirectives) {\n      debugLog('Checker', 'Old ROBOTS directive detected:', content);\n      problematicTags.push(meta);\n    }\n  });\n\n  if (problematicTags.length > 0) {\n    issues.push({\n      category: 'cleanup',\n      severity: SEVERITY.WARNING,\n      rule: 'old_robots_meta',\n      name: '古いROBOTSメタタグ',\n      message: `${problematicTags.length}個の古いROBOTSディレクティブ（NOODP、NOYDIR、NOARCHIVE）が検出されました。これらは現在サポートされていません。`,\n      elements: problematicTags,\n      solution: getOldRobotsMetaSolution()\n    });\n  }\n\n  return issues;\n}\n\n/**\n * 廃止されたmetaタグをチェック\n * @returns {Array} 廃止されたmeta関連の問題リスト\n */\nfunction checkDeprecatedMetaTags() {\n  const issues = [];\n  const keywordsMeta = document.querySelectorAll('meta[name=\"keywords\"]');\n\n  if (keywordsMeta.length > 0) {\n    issues.push({\n      category: 'cleanup',\n      severity: SEVERITY.INFO,\n      rule: 'deprecated_meta_keywords',\n      name: '廃止されたmeta keywordsタグ',\n      message: `${keywordsMeta.length}個のmeta keywordsタグが検出されました。現在のSEOでは効果がなく、削除を推奨します。`,\n      elements: Array.from(keywordsMeta),\n      solution: getDeprecatedMetaSolution()\n    });\n  }\n\n  return issues;\n}\n\n/**\n * 古いGA解決策テキスト\n */\nfunction getLegacyGASolution() {\n  return `古いGoogle Analyticsコードの対応:\n\n🚨 問題: UA-xxxxxxx-x形式の古いトラッキングコード\n🔧 修正: Google Analytics 4（GA4）への移行\n\n✅ GA4移行手順:\n1. GA4プロパティの作成\n2. gtag.jsまたはGTMでの新しいトラッキング設定\n3. 古いanalytics.jsコードの削除\n\n📖 影響: 2023年7月以降、UAプロパティは動作停止`;\n}\n\n/**\n * 古いGTM解決策テキスト\n */\nfunction getLegacyGTMSolution() {\n  return `GTMコンテナの確認:\n\n✅ 確認項目:\n• 使用中のコンテナかどうか\n• 複数コンテナの必要性\n• 古い実装の削除\n\n🔧 推奨対応:\n• 不要なコンテナコードの削除\n• GTMでの一元管理`;\n}\n\n/**\n * Adobe Analytics解決策テキスト\n */\nfunction getAdobeAnalyticsSolution() {\n  return `Adobe Analyticsコードの確認:\n\n✅ 確認項目:\n• 現在も使用しているか\n• 他の解析ツールとの重複\n\n🔧 推奨対応:\n• 不要な場合は削除\n• パフォーマンス向上のため最適化`;\n}\n\n/**\n * 不要なnoscript解決策テキスト\n */\nfunction getUnnecessaryNoScriptSolution() {\n  return `不要なnoscriptタグの対応:\n\n🚨 問題: 空または意味のないnoscriptタグ\n🔧 修正: 不要なタグの削除\n\n✅ 適切な使用:\n• JavaScriptが無効な場合の代替コンテンツのみ\n• 空のタグは削除`;\n}\n\n/**\n * 古いROBOTSメタ解決策テキスト\n */\nfunction getOldRobotsMetaSolution() {\n  return `古いROBOTSディレクティブの対応:\n\n🚨 問題: NOODP、NOYDIR、NOARCHIVEディレクティブ\n🔧 修正: サポートされているディレクティブに変更\n\n✅ 現在有効なディレクティブ:\n• index/noindex\n• follow/nofollow\n• nosnippet\n• noarchive（Googleでサポート継続）`;\n}\n\n/**\n * 廃止されたmeta解決策テキスト\n */\nfunction getDeprecatedMetaSolution() {\n  return `meta keywordsタグの対応:\n\n🚨 問題: <meta name=\"keywords\" content=\"...\">\n🔧 修正: タグの削除\n\n📖 理由:\n• 検索エンジンはkeywordsメタタグを無視\n• スパムの温床となったため廃止\n• 現在はコンテンツの質が重要`;\n}","/**\n * メイン分析エンジン\n * 各分析モジュールを統合し、全体的な分析を実行\n */\n\nimport { debugLog, errorLog } from '../utils/debug.js';\nimport { isHtmlCheckerElement } from '../utils/dom.js';\nimport { getAnalysisTargetElements } from './element-preprocessor.js';\nimport { analyzeHeadingStructure, detectHeadingIssues } from '../analysis/heading.js';\nimport { analyzeAccessibility, detectAccessibilityIssues } from '../analysis/accessibility.js';\nimport { detectSemanticIssues } from '../analysis/semantic.js';\nimport { detectCleanupIssues } from '../analysis/cleanup.js';\n// Removed non-original modules: seo.js and structure.js\n\n/**\n * 完全なページ分析を実行\n * @returns {Object} 分析結果\n */\nexport function performFullCheck() {\n  debugLog('Engine', 'Starting full semantic analysis...');\n  \n  try {\n    // Phase 1: 要素の事前プリプロセス（一度だけ実行）\n    const targetElements = getAnalysisTargetElements();\n    \n    const results = {\n      url: window.location.href,\n      title: document.title,\n      timestamp: Date.now(),\n      \n      // 基本統計（プリプロセス済み要素から生成）\n      statistics: generateBasicStatistics(targetElements),\n      \n      // セマンティック要素分析\n      semantic: analyzeSemanticElements(targetElements),\n      \n      // 各分析モジュールの結果（プリプロセス済み要素を使用）\n      headingStructure: analyzeHeadingStructure(targetElements),\n      accessibility: analyzeAccessibility(targetElements),\n      \n      // パフォーマンス指標\n      performance: analyzePerformance(),\n\n      // 詳細な問題検出（プリプロセス済み要素を使用）\n      issues: detectAllIssues(targetElements)\n    };\n    \n    debugLog('Engine', 'Full analysis completed:', results);\n    return results;\n    \n  } catch (error) {\n    errorLog('Engine', 'Error during analysis:', error);\n    throw error;\n  }\n}\n\n/**\n * 基本統計を生成（プリプロセス済み要素から）\n * @param {Object} targetElements - プリプロセス済み要素\n * @returns {Object} 基本統計データ\n */\nfunction generateBasicStatistics(targetElements) {\n  const allDocumentElements = document.querySelectorAll('*').length;\n  const processedElements = targetElements.headings.all.length + \n                           targetElements.accessibility.images.length + \n                           targetElements.accessibility.links.length;\n  \n  return {\n    totalElements: allDocumentElements,\n    processedElements: processedElements,\n    headings: targetElements.headings.all.length,\n    images: targetElements.accessibility.images.length,\n    links: targetElements.accessibility.links.length,\n    forms: targetElements.accessibility.formElements.length,\n    tables: targetElements.accessibility.tables.length\n  };\n}\n\n/**\n * セマンティック要素を分析（プリプロセス済み要素から）\n * @param {Object} targetElements - プリプロセス済み要素\n * @returns {Object} セマンティック要素の使用状況\n */\nfunction analyzeSemanticElements(targetElements) {\n  // セマンティック要素は現在プリプロセスで収集していないため、\n  // 従来通りDOMスキャンを行うが、除外要素チェックは省略（後で最適化可能）\n  return {\n    header: document.querySelectorAll('header').length,\n    nav: document.querySelectorAll('nav').length,\n    main: document.querySelectorAll('main').length,\n    article: document.querySelectorAll('article').length,\n    section: document.querySelectorAll('section').length,\n    aside: document.querySelectorAll('aside').length,\n    footer: document.querySelectorAll('footer').length,\n    timeElements: targetElements.semantic.timeElements.length,\n    dateElements: targetElements.semantic.dateElements.length\n  };\n}\n\n/**\n * パフォーマンス指標を分析\n * @returns {Object} パフォーマンス関連データ\n */\nfunction analyzePerformance() {\n  const performanceData = {\n    // DOM要素数\n    domElementCount: document.querySelectorAll('*').length,\n    \n    // スクリプトタグ数\n    scriptTags: document.querySelectorAll('script').length,\n    \n    // 外部CSSファイル数\n    externalStylesheets: document.querySelectorAll('link[rel=\"stylesheet\"]').length,\n    \n    // インラインスタイル数\n    inlineStyles: document.querySelectorAll('[style]').length,\n    \n    // 画像数\n    imageCount: document.querySelectorAll('img').length,\n    \n    // iframe数\n    iframeCount: document.querySelectorAll('iframe').length\n  };\n\n  // パフォーマンススコアの計算\n  performanceData.performanceScore = calculatePerformanceScore(performanceData);\n  \n  return performanceData;\n}\n\n/**\n * パフォーマンススコアを計算\n * @param {Object} data - パフォーマンスデータ\n * @returns {number} 0-100のスコア\n */\nfunction calculatePerformanceScore(data) {\n  let score = 100;\n  \n  // DOM要素数によるペナルティ\n  if (data.domElementCount > 1500) {\n    score -= Math.min((data.domElementCount - 1500) / 50, 20);\n  }\n  \n  // スクリプトタグ数によるペナルティ\n  if (data.scriptTags > 10) {\n    score -= Math.min((data.scriptTags - 10) * 2, 15);\n  }\n  \n  // インラインスタイル数によるペナルティ\n  if (data.inlineStyles > 20) {\n    score -= Math.min((data.inlineStyles - 20) * 0.5, 10);\n  }\n  \n  // iframe数によるペナルティ\n  if (data.iframeCount > 3) {\n    score -= Math.min((data.iframeCount - 3) * 5, 15);\n  }\n  \n  return Math.max(0, Math.round(score));\n}\n\n/**\n * 全ての問題を検出（プリプロセス済み要素を使用）\n * @param {Object} targetElements - プリプロセス済み要素\n * @returns {Array} 検出された全問題のリスト\n */\nfunction detectAllIssues(targetElements) {\n  const allIssues = [];\n  \n  try {\n    // 各分析モジュールから問題を検出（プリプロセス済み要素を渡す）\n    const headingIssues = detectHeadingIssues(targetElements);\n    const accessibilityIssues = detectAccessibilityIssues(targetElements);\n    const semanticIssues = detectSemanticIssues(targetElements);\n    const cleanupIssues = detectCleanupIssues(targetElements);\n    \n    // 全問題をマージ\n    allIssues.push(...headingIssues);\n    allIssues.push(...accessibilityIssues);\n    allIssues.push(...semanticIssues);\n    allIssues.push(...cleanupIssues);\n    \n    debugLog('Engine', `Total issues detected: ${allIssues.length}`);\n    \n    // 重要度順にソート\n    allIssues.sort((a, b) => {\n      const severityOrder = { 'error': 3, 'warning': 2, 'info': 1 };\n      return (severityOrder[b.severity] || 0) - (severityOrder[a.severity] || 0);\n    });\n    \n  } catch (error) {\n    errorLog('Engine', 'Error detecting issues:', error);\n  }\n  \n  return allIssues;\n}\n\n/**\n * 問題カテゴリ別の統計を生成\n * @param {Array} issues - 問題リスト\n * @returns {Object} カテゴリ別統計\n */\nexport function generateIssueSummary(issues) {\n  const summary = {\n    total: issues.length,\n    byCategory: {},\n    bySeverity: {\n      error: 0,\n      warning: 0,\n      info: 0\n    }\n  };\n  \n  issues.forEach(issue => {\n    // カテゴリ別カウント\n    if (!summary.byCategory[issue.category]) {\n      summary.byCategory[issue.category] = 0;\n    }\n    summary.byCategory[issue.category]++;\n    \n    // 重要度別カウント\n    if (summary.bySeverity[issue.severity] !== undefined) {\n      summary.bySeverity[issue.severity]++;\n    }\n  });\n  \n  return summary;\n}\n\n/**\n * 全体的な品質スコアを計算\n * @param {Object} results - 分析結果\n * @returns {number} 0-100の品質スコア\n */\nexport function calculateOverallScore(results) {\n  let score = 100;\n  \n  // 問題の重要度に基づくペナルティ\n  results.issues.forEach(issue => {\n    switch (issue.severity) {\n      case 'error':\n        score -= 10;\n        break;\n      case 'warning':\n        score -= 5;\n        break;\n      case 'info':\n        score -= 2;\n        break;\n    }\n  });\n  \n  // セマンティック要素の使用でボーナス\n  const semanticElements = ['header', 'nav', 'main', 'article', 'section', 'aside', 'footer'];\n  semanticElements.forEach(element => {\n    if (results.semantic[element] > 0) {\n      score += 2;\n    }\n  });\n  \n  // パフォーマンススコアを加味\n  score = (score + results.performance.performanceScore) / 2;\n  \n  return Math.max(0, Math.min(100, Math.round(score)));\n}","/**\n * 要素ハイライト管理モジュール\n */\n\nimport { debugLog } from '../utils/debug.js';\n\n// ハイライト状態の管理\nlet highlightedElements = [];\nlet selectedElement = null;\nlet selectedElementMarker = null;\n\n// ハイライトスタイルのID\nconst HIGHLIGHT_STYLE_ID = 'html-semantic-checker-highlight-styles';\n\n/**\n * ハイライト機能の初期化\n */\nexport function initializeHighlight() {\n  if (!document.getElementById(HIGHLIGHT_STYLE_ID)) {\n    addHighlightStyles();\n  }\n  \n  // メッセージリスナーを追加\n  window.addEventListener('message', handleHighlightMessage);\n  \n  debugLog('Highlight', 'Highlight system initialized');\n}\n\n/**\n * ハイライト用のスタイルを追加\n */\nfunction addHighlightStyles() {\n  const styleElement = document.createElement('style');\n  styleElement.id = HIGHLIGHT_STYLE_ID;\n  styleElement.textContent = `\n    .hsc-highlighted-element {\n      outline: 3px solid #dc3545 !important;\n      outline-offset: 2px !important;\n      position: relative !important;\n      z-index: 999998 !important;\n      /* H1要素の背景を強調（画像のみの場合でも見えるように） */\n      background: rgba(220, 53, 69, 0.1) !important;\n      /* ボーダーも追加で確実に見えるようにする */\n      border: 2px solid #dc3545 !important;\n      box-shadow: 0 0 0 1px rgba(220, 53, 69, 0.3) !important;\n    }\n    \n    .hsc-selected-element {\n      outline: 3px solid #28a745 !important;\n      outline-offset: 2px !important;\n      position: relative !important;\n      z-index: 999999 !important;\n      background-color: rgba(40, 167, 69, 0.1) !important;\n    }\n    \n    .hsc-element-marker {\n      position: absolute !important;\n      background: #28a745 !important;\n      color: white !important;\n      padding: 4px 8px !important;\n      font-size: 12px !important;\n      font-weight: bold !important;\n      border-radius: 4px !important;\n      z-index: 1000000 !important;\n      pointer-events: none !important;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n      line-height: 1 !important;\n      white-space: nowrap !important;\n      top: -25px !important;\n      left: 0 !important;\n      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2) !important;\n    }\n    \n    .hsc-element-marker::after {\n      content: '';\n      position: absolute;\n      top: 100%;\n      left: 8px;\n      border: 4px solid transparent;\n      border-top-color: #28a745;\n    }\n    \n  `;\n  \n  document.head.appendChild(styleElement);\n}\n\n/**\n * メッセージハンドラー\n * @param {MessageEvent} event - メッセージイベント\n */\nfunction handleHighlightMessage(event) {\n  if (event.data && event.data.type) {\n    switch (event.data.type) {\n      case 'HTML_CHECKER_HIGHLIGHT_ELEMENTS':\n        highlightElements(event.data.elements);\n        break;\n      case 'HTML_CHECKER_CLEAR_HIGHLIGHTS':\n        clearAllHighlights();\n        break;\n      case 'HTML_CHECKER_SELECT_ELEMENT':\n        selectElement(event.data.element);\n        break;\n    }\n  }\n}\n\n/**\n * 全問題要素をハイライト（bookmarklet準拠）\n * @param {Object} results - 分析結果\n */\nexport function highlightAllIssueElements(results) {\n  clearAllHighlights();\n  \n  const allElements = new Set();\n  \n  // 全ての問題から要素を収集\n  results.issues.forEach(issue => {\n    if (issue.elements && Array.isArray(issue.elements)) {\n      issue.elements.forEach(element => {\n        if (element && element.nodeType === 1) { // Element node\n          allElements.add(element);\n        }\n      });\n    }\n  });\n  \n  // 要素をハイライト\n  allElements.forEach(element => {\n    element.classList.add('hsc-highlighted-element');\n    highlightedElements.push(element);\n  });\n  \n  debugLog('Highlight', `Highlighted ${allElements.size} issue elements`);\n}\n\n/**\n * 特定の要素群をハイライト\n * @param {Array} elements - ハイライトする要素の配列\n */\nexport function highlightElements(elements) {\n  // 既存のハイライトをクリアしない（持続性を保つ）\n  \n  if (!Array.isArray(elements)) return;\n  \n  elements.forEach(element => {\n    if (element && element.nodeType === 1) {\n      // 既にハイライトされていない場合のみ追加\n      if (!element.classList.contains('hsc-highlighted-element')) {\n        element.classList.add('hsc-highlighted-element');\n        highlightedElements.push(element);\n      }\n    }\n  });\n  \n  debugLog('Highlight', `Highlighted ${elements.length} elements`);\n}\n\n/**\n * 要素を選択状態にする\n * @param {Element} element - 選択する要素\n */\nexport function selectElement(element) {\n  debugLog('Highlight', 'selectElement called with:', element);\n  \n  if (!element) {\n    debugLog('Highlight', 'No element provided');\n    return;\n  }\n  \n  if (element.nodeType !== 1) {\n    debugLog('Highlight', 'Element is not an Element node:', element.nodeType);\n    return;\n  }\n  \n  clearSelectedElementHighlight();\n  \n  selectedElement = element;\n  element.classList.add('hsc-selected-element');\n  \n  debugLog('Highlight', 'Element classes after selection:', element.className);\n  \n  // マーカーを作成\n  try {\n    createElementMarker(element);\n  } catch (error) {\n    debugLog('Highlight', 'Error creating marker:', error);\n  }\n  \n  // 要素が見える位置にスクロール（少し遅延を入れて確実に実行）\n  setTimeout(() => {\n    try {\n      element.scrollIntoView({\n        behavior: 'smooth',\n        block: 'center',\n        inline: 'nearest'\n      });\n      debugLog('Highlight', 'Scrolled to element');\n    } catch (error) {\n      debugLog('Highlight', 'Error scrolling to element:', error);\n    }\n  }, 100);\n  \n  // 他のハイライトは維持する（元の実装に合わせて持続性を保つ）\n  // 一時的なクリアは行わない\n  \n  debugLog('Highlight', 'Element selected successfully:', element.tagName);\n}\n\n/**\n * 選択状態のハイライトをクリア\n */\nexport function clearSelectedElementHighlight() {\n  if (selectedElement) {\n    selectedElement.classList.remove('hsc-selected-element');\n    selectedElement = null;\n  }\n  \n  // マーカーを削除\n  if (selectedElementMarker) {\n    selectedElementMarker.remove();\n    selectedElementMarker = null;\n  }\n  \n}\n\n/**\n * 全てのハイライトをクリア\n */\nexport function clearAllHighlights() {\n  // 問題要素のハイライトをクリア\n  highlightedElements.forEach(element => {\n    if (element && element.classList) {\n      element.classList.remove('hsc-highlighted-element');\n    }\n  });\n  highlightedElements = [];\n  \n  // 選択要素のハイライトをクリア\n  clearSelectedElementHighlight();\n  \n  debugLog('Highlight', 'All highlights cleared');\n}\n\n/**\n * 要素のマーカーを作成\n * @param {Element} element - 対象要素\n */\nfunction createElementMarker(element) {\n  if (selectedElementMarker) {\n    selectedElementMarker.remove();\n  }\n  \n  const marker = document.createElement('div');\n  marker.className = 'hsc-element-marker';\n  marker.textContent = element.tagName.toLowerCase();\n  \n  // img, input, br, hr等のvoid要素は子要素を持てないため、親要素に配置\n  const voidElements = ['IMG', 'INPUT', 'BR', 'HR', 'META', 'LINK', 'AREA', 'BASE', 'COL', 'EMBED', 'SOURCE', 'TRACK', 'WBR'];\n  \n  if (voidElements.includes(element.tagName)) {\n    // void要素の場合は親要素に配置し、位置を調整\n    const parent = element.parentElement;\n    if (parent) {\n      parent.style.position = parent.style.position || 'relative';\n      parent.appendChild(marker);\n      \n      // 要素の位置に合わせてマーカーを配置\n      const rect = element.getBoundingClientRect();\n      const parentRect = parent.getBoundingClientRect();\n      \n      marker.style.position = 'absolute';\n      marker.style.left = (rect.left - parentRect.left) + 'px';\n      marker.style.top = (rect.top - parentRect.top - 25) + 'px';\n    } else {\n      // 親要素がない場合はbodyに配置\n      document.body.appendChild(marker);\n      const rect = element.getBoundingClientRect();\n      marker.style.position = 'fixed';\n      marker.style.left = rect.left + 'px';\n      marker.style.top = (rect.top - 25) + 'px';\n    }\n  } else {\n    // 通常の要素の場合\n    element.style.position = element.style.position || 'relative';\n    element.appendChild(marker);\n  }\n  \n  selectedElementMarker = marker;\n}\n\n/**\n * 要素のポップアップを作成\n * @param {Element} element - 対象要素\n */\n// この関数は削除されました - ポップアップ機能は不要のため\n\n/**\n * ハイライトシステムのクリーンアップ\n */\nexport function cleanupHighlight() {\n  clearAllHighlights();\n  \n  // スタイルを削除\n  const styleElement = document.getElementById(HIGHLIGHT_STYLE_ID);\n  if (styleElement) {\n    styleElement.remove();\n  }\n  \n  // メッセージリスナーを削除\n  window.removeEventListener('message', handleHighlightMessage);\n  \n  debugLog('Highlight', 'Highlight system cleaned up');\n}\n\n/**\n * 現在ハイライトされている要素数を取得\n * @returns {number} ハイライト要素数\n */\nexport function getHighlightedElementsCount() {\n  return highlightedElements.length;\n}\n\n/**\n * 選択されている要素を取得\n * @returns {Element|null} 選択中の要素\n */\nexport function getSelectedElement() {\n  return selectedElement;\n}","/**\n * ドロワーUI管理モジュール\n */\n\nimport { debugLog } from '../utils/debug.js';\nimport { selectElement, highlightElements } from './highlight.js';\nimport { getElementDetails, isNonVisibleElement } from '../utils/dom.js';\n\n// グローバル状態\nlet drawerElement = null;\nlet currentResults = null;\n\n/**\n * ドロワーの初期化\n */\nexport function initializeDrawer() {\n  if (drawerElement) {\n    debugLog('Drawer', 'Drawer already initialized');\n    return;\n  }\n  \n  createDrawerElement();\n  attachDrawerEvents();\n  debugLog('Drawer', 'Drawer initialized');\n}\n\n/**\n * ドロワー要素を作成\n */\nfunction createDrawerElement() {\n  drawerElement = document.createElement('div');\n  drawerElement.id = 'html-semantic-checker-drawer';\n  drawerElement.innerHTML = getDrawerHTML();\n  \n  // ドロワーのスタイルを追加\n  if (!document.getElementById('html-semantic-checker-styles')) {\n    const styleElement = document.createElement('style');\n    styleElement.id = 'html-semantic-checker-styles';\n    styleElement.textContent = getDrawerStyles();\n    document.head.appendChild(styleElement);\n  }\n  \n  document.body.appendChild(drawerElement);\n}\n\n/**\n * ドロワーのHTML構造\n * @returns {string} HTMLテンプレート\n */\nfunction getDrawerHTML() {\n  return `\n    <div class=\"hsc-drawer-overlay\"></div>\n    <div class=\"hsc-drawer-panel\">\n      <div class=\"hsc-drawer-header\">\n        <button class=\"hsc-close-btn\" title=\"閉じる\">×</button>\n      </div>\n      \n      <div class=\"hsc-drawer-content\">\n        <div class=\"hsc-loading\">\n          <div class=\"hsc-spinner\"></div>\n          <p>分析中...</p>\n        </div>\n        \n        <div class=\"hsc-results\" style=\"display: none;\">\n          \n          <div class=\"hsc-issue-filters\">\n            <select id=\"hsc-category-filter\">\n              <option value=\"all\">全カテゴリ</option>\n              <option value=\"heading\">見出し</option>\n              <option value=\"accessibility\">アクセシビリティ</option>\n              <option value=\"cleanup\">クリーンアップ</option>\n            </select>\n            <select id=\"hsc-severity-filter\">\n              <option value=\"all\">全重要度</option>\n              <option value=\"error\">エラー</option>\n              <option value=\"warning\">警告</option>\n              <option value=\"info\">情報</option>\n            </select>\n          </div>\n          \n          <div class=\"hsc-issues-list\"></div>\n        </div>\n      </div>\n    </div>\n  `;\n}\n\n/**\n * ドロワーのスタイル\n * @returns {string} CSSスタイル\n */\nfunction getDrawerStyles() {\n  return `\n    /* ドロワーのベーススタイル */\n    #html-semantic-checker-drawer {\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      z-index: 1000000;\n      visibility: hidden;\n      opacity: 0;\n      transition: all 0.3s ease;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n    }\n\n    /* 外部CSSの影響を防ぐための強制スタイル */\n    #html-semantic-checker-drawer *,\n    #html-semantic-checker-drawer *:before,\n    #html-semantic-checker-drawer *:after {\n      text-align: left !important;\n      direction: ltr !important;\n      text-indent: 0 !important;\n      letter-spacing: normal !important;\n      word-spacing: normal !important;\n      text-transform: none !important;\n    }\n\n    #html-semantic-checker-drawer.open {\n      visibility: visible;\n      opacity: 1;\n    }\n\n    .hsc-drawer-overlay {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0, 0, 0, 0.5);\n    }\n\n    .hsc-drawer-panel {\n      position: absolute;\n      top: 0;\n      right: -420px;\n      width: 420px;\n      height: 100%;\n      background: #ffffff;\n      box-shadow: -4px 0 20px rgba(0, 0, 0, 0.15);\n      transition: right 0.3s ease;\n      display: flex;\n      flex-direction: column;\n      overflow: hidden;\n    }\n\n    #html-semantic-checker-drawer.open .hsc-drawer-panel {\n      right: 0;\n    }\n\n    /* ヘッダー */\n    .hsc-drawer-header {\n      padding: 12px 16px;\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n      color: white;\n      border-bottom: 1px solid #e1e5e9;\n      display: flex;\n      justify-content: flex-end;\n      align-items: center;\n      flex-shrink: 0;\n    }\n\n\n    .hsc-close-btn {\n      background: none;\n      border: none;\n      color: white;\n      font-size: 24px;\n      cursor: pointer;\n      padding: 0;\n      width: 32px;\n      height: 32px;\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      transition: background 0.2s;\n    }\n\n    .hsc-close-btn:hover {\n      background: rgba(255, 255, 255, 0.2);\n    }\n\n    /* メインコンテンツエリア */\n    .hsc-drawer-content {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      min-height: 0;\n      overflow: hidden;\n    }\n\n    /* ローディング */\n    .hsc-loading {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      height: 200px;\n      color: #6c757d;\n    }\n\n    .hsc-spinner {\n      width: 40px;\n      height: 40px;\n      border: 3px solid #f1f3f4;\n      border-top: 3px solid #667eea;\n      border-radius: 50%;\n      animation: spin 1s linear infinite;\n      margin-bottom: 16px;\n    }\n\n    @keyframes spin {\n      0% { transform: rotate(0deg); }\n      100% { transform: rotate(360deg); }\n    }\n\n\n    /* フィルターセクション */\n    .hsc-issue-filters {\n      padding: 12px 20px;\n      background: white;\n      border-bottom: 1px solid #e9ecef;\n      display: flex;\n      gap: 10px;\n      flex-shrink: 0;\n    }\n\n    .hsc-issue-filters select {\n      flex: 1;\n      padding: 8px 12px;\n      border: 1px solid #ced4da;\n      border-radius: 6px;\n      background: white;\n      font-size: 14px;\n      color: #495057;\n    }\n\n    /* 結果エリア */\n    .hsc-results {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      min-height: 0;\n      overflow: hidden;\n    }\n\n    /* 問題リスト */\n    .hsc-issues-list {\n      flex: 1;\n      overflow-y: auto;\n      padding: 16px 0;\n    }\n\n    .hsc-issue-item {\n      margin: 0 16px 16px 16px;\n      background: white;\n      border: 1px solid #e9ecef;\n      border-radius: 8px;\n      overflow: hidden;\n      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);\n      transition: all 0.2s ease;\n    }\n\n    .hsc-issue-item:hover {\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n      border-color: #667eea;\n    }\n\n    /* 問題ヘッダー */\n    .hsc-issue-header {\n      padding: 16px 20px;\n      background: #f8f9fa;\n      border-bottom: 1px solid #e9ecef;\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      cursor: pointer;\n      user-select: none;\n    }\n\n    .hsc-issue-severity {\n      width: 12px;\n      height: 12px;\n      border-radius: 50%;\n      flex-shrink: 0;\n    }\n\n    .hsc-issue-severity.error {\n      background: #dc3545;\n    }\n\n    .hsc-issue-severity.warning {\n      background: #ffc107;\n    }\n\n    .hsc-issue-title {\n      flex: 1;\n      font-weight: 600;\n      color: #2c3e50;\n      font-size: 15px;\n      text-align: left !important;\n      direction: ltr !important;\n    }\n\n    .hsc-issue-count {\n      background: #667eea;\n      color: white;\n      padding: 4px 8px;\n      border-radius: 12px;\n      font-size: 12px;\n      font-weight: 500;\n    }\n\n    .hsc-expand-icon {\n      color: #6c757d;\n      font-size: 14px;\n      transition: transform 0.2s;\n    }\n\n    .hsc-issue-item.expanded .hsc-expand-icon {\n      transform: rotate(180deg);\n    }\n\n    /* 問題詳細 */\n    .hsc-issue-details {\n      display: none;\n      padding: 20px;\n    }\n\n    .hsc-issue-item.expanded .hsc-issue-details {\n      display: block;\n    }\n\n    .hsc-issue-message {\n      font-size: 14px;\n      color: #495057;\n      line-height: 1.6;\n      margin-bottom: 16px;\n      padding: 12px;\n      background: #f8f9fa;\n      border-left: 3px solid #667eea;\n      border-radius: 0 4px 4px 0;\n      text-align: left !important;\n      direction: ltr !important;\n    }\n\n    /* 要素リスト */\n    .hsc-issue-elements h4 {\n      font-size: 14px;\n      font-weight: 600;\n      color: #2c3e50;\n      margin: 0 0 12px 0;\n      text-align: left !important;\n      direction: ltr !important;\n    }\n\n    .hsc-elements-list {\n      list-style: none;\n      padding: 0;\n      margin: 0 0 20px 0;\n    }\n\n    .hsc-element-item {\n      padding: 12px 16px;\n      background: #f8f9fa;\n      border: 1px solid #e9ecef;\n      border-radius: 6px;\n      margin-bottom: 8px;\n      cursor: pointer;\n      transition: all 0.2s;\n    }\n\n    .hsc-element-item:hover {\n      background: #e9ecef;\n      border-color: #667eea;\n    }\n\n    .hsc-element-item.non-visible {\n      opacity: 0.5;\n      cursor: not-allowed;\n    }\n\n    .hsc-element-tag {\n      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n      font-size: 13px;\n      color: #495057;\n      text-align: left !important;\n      direction: ltr !important;\n    }\n\n    /* === 解決方法のシンプルなスタイル === */\n    .hsc-issue-solution {\n      margin-top: 16px;\n      background: #f8f9fa;\n      border-radius: 6px;\n      padding: 16px;\n    }\n\n    .hsc-solution-header {\n      font-size: 14px;\n      font-weight: 600;\n      color: #2c3e50;\n      margin-bottom: 12px;\n      display: flex;\n      align-items: center;\n      gap: 6px;\n      text-align: left !important;\n      direction: ltr !important;\n    }\n\n    .hsc-solution-header::before {\n      content: \"💡\";\n      font-size: 16px;\n    }\n\n    .hsc-solution-content {\n      font-size: 14px;\n      color: #495057;\n      line-height: 1.6;\n      text-align: left !important;\n      direction: ltr !important;\n    }\n\n    /* セクション */\n    .hsc-solution-section {\n      margin-bottom: 16px;\n    }\n\n    .hsc-solution-section:last-child {\n      margin-bottom: 0;\n    }\n\n    .hsc-solution-title {\n      font-size: 14px;\n      font-weight: 600;\n      color: #667eea;\n      margin: 0 0 8px 0;\n      text-align: left !important;\n      direction: ltr !important;\n    }\n\n    .hsc-solution-text {\n      color: #495057;\n      line-height: 1.6;\n      margin: 0;\n      white-space: pre-wrap;\n      word-wrap: break-word;\n      text-align: left !important;\n      direction: ltr !important;\n    }\n\n    /* コード例 */\n    .hsc-code-example {\n      margin-top: 8px;\n      padding: 12px;\n      background: #2c3e50;\n      color: #f8f9fa;\n      border-radius: 4px;\n      font-family: 'Monaco', 'Menlo', monospace;\n      font-size: 13px;\n      overflow-x: auto;\n      white-space: pre-wrap;\n      word-wrap: break-word;\n      border: 2px solid;\n    }\n\n    .hsc-good-example {\n      border-color: #28a745;\n    }\n\n    .hsc-bad-example {\n      border-color: #dc3545;\n    }\n\n    .hsc-example-header {\n      padding: 12px 16px;\n      font-weight: 600;\n      font-size: 14px;\n      display: flex;\n      align-items: center;\n      gap: 8px;\n    }\n\n\n\n    /* レスポンシブ */\n    @media (max-width: 480px) {\n      .hsc-drawer-panel {\n        width: 100%;\n        right: -100%;\n      }\n\n\n      .hsc-examples {\n        grid-template-columns: 1fr;\n      }\n    }\n\n    /* スクロールバー */\n    .hsc-issues-list::-webkit-scrollbar {\n      width: 6px;\n    }\n\n    .hsc-issues-list::-webkit-scrollbar-track {\n      background: #f1f3f4;\n    }\n\n    .hsc-issues-list::-webkit-scrollbar-thumb {\n      background: #ced4da;\n      border-radius: 3px;\n    }\n\n    .hsc-issues-list::-webkit-scrollbar-thumb:hover {\n      background: #adb5bd;\n    }\n  `;\n}\n\n/**\n * ドロワーイベントのアタッチ\n */\nfunction attachDrawerEvents() {\n  // 閉じるボタン\n  const closeBtn = drawerElement.querySelector('.hsc-close-btn');\n  closeBtn.addEventListener('click', closeDrawer);\n  \n  // オーバーレイクリック\n  const overlay = drawerElement.querySelector('.hsc-drawer-overlay');\n  overlay.addEventListener('click', closeDrawer);\n  \n  \n  // フィルター\n  const categoryFilter = drawerElement.querySelector('#hsc-category-filter');\n  const severityFilter = drawerElement.querySelector('#hsc-severity-filter');\n  \n  categoryFilter.addEventListener('change', filterIssues);\n  severityFilter.addEventListener('change', filterIssues);\n  \n}\n\n/**\n * ドロワーを開く\n */\nexport function openDrawer() {\n  if (!drawerElement) {\n    initializeDrawer();\n  }\n  \n  drawerElement.classList.add('open');\n  drawerOpen = true;\n  debugLog('Drawer', 'Drawer opened');\n}\n\n/**\n * ドロワーを閉じる\n */\nexport function closeDrawer() {\n  if (drawerElement) {\n    drawerElement.classList.remove('open');\n  }\n  drawerOpen = false;\n  debugLog('Drawer', 'Drawer closed');\n}\n\n/**\n * 結果をドロワーに表示\n * @param {Object} results - 分析結果\n */\nexport function displayResultsInDrawer(results) {\n  currentResults = results;\n  \n  if (!drawerElement) {\n    initializeDrawer();\n  }\n  \n  // ローディングを隠し、結果を表示\n  const loading = drawerElement.querySelector('.hsc-loading');\n  const resultsDiv = drawerElement.querySelector('.hsc-results');\n  \n  loading.style.display = 'none';\n  resultsDiv.style.display = 'flex';\n  \n  \n  // 問題リストを更新\n  updateIssuesList(results.issues);\n  \n  // タブシステムを削除したため、概要・構造タブの更新は不要\n  \n  openDrawer();\n}\n\n\n/**\n * 問題リストを更新\n * @param {Array} issues - 問題リスト\n */\nfunction updateIssuesList(issues) {\n  const issuesList = drawerElement.querySelector('.hsc-issues-list');\n  \n  if (issues.length === 0) {\n    issuesList.innerHTML = '<p class=\"hsc-no-issues\">問題は見つかりませんでした。</p>';\n    return;\n  }\n  \n  // 問題をグループ化\n  const groupedIssues = groupIssuesByName(issues);\n  \n  issuesList.innerHTML = '';\n  Object.entries(groupedIssues).forEach(([name, issueGroup]) => {\n    const issueElement = createIssueElement(name, issueGroup);\n    issuesList.appendChild(issueElement);\n  });\n}\n\n/**\n * 問題を名前でグループ化\n * @param {Array} issues - 問題リスト\n * @returns {Object} グループ化された問題\n */\nfunction groupIssuesByName(issues) {\n  const grouped = {};\n  \n  issues.forEach(issue => {\n    if (!grouped[issue.name]) {\n      grouped[issue.name] = {\n        ...issue,\n        count: 0,\n        allElements: []\n      };\n    }\n    grouped[issue.name].count += issue.elements ? issue.elements.length : 1;\n    if (issue.elements) {\n      grouped[issue.name].allElements.push(...issue.elements);\n    }\n  });\n  \n  return grouped;\n}\n\n/**\n * 問題要素を作成\n * @param {string} name - 問題名\n * @param {Object} issue - 問題データ\n * @returns {HTMLElement} 問題要素\n */\nfunction createIssueElement(name, issue) {\n  const div = document.createElement('div');\n  div.className = 'hsc-issue-item';\n  div.dataset.category = issue.category;\n  div.dataset.severity = issue.severity;\n  \n  // 関連要素の詳細リストを作成（すべて表示）\n  let elementsListHTML = '';\n  if (issue.allElements && issue.allElements.length > 0) {\n    elementsListHTML = `\n      <div class=\"hsc-issue-elements\">\n        <h4>関連要素 (${issue.allElements.length}個):</h4>\n        <ul class=\"hsc-elements-list\">\n          ${issue.allElements.map((element, index) => {\n            // 元の詳細な要素表示を使用\n            const elementDetails = getElementDetails(element);\n            const isNonVisible = isNonVisibleElement(element);\n            \n            return `\n              <li class=\"hsc-element-item ${isNonVisible ? 'non-visible' : ''}\" data-element-index=\"${index}\" ${isNonVisible ? 'data-non-visible=\"true\"' : ''}>\n                <div class=\"hsc-element-tag\">${escapeHtml(elementDetails)}</div>\n              </li>\n            `;\n          }).join('')}\n        </ul>\n      </div>\n    `;\n  }\n  \n  // 解決策をHTMLとして適切にフォーマット\n  let solutionHTML = '';\n  if (issue.solution) {\n    const formattedSolution = formatSolutionForUI(issue.solution);\n    solutionHTML = `\n      <div class=\"hsc-issue-solution\">\n        <div class=\"hsc-solution-header\">解決方法</div>\n        ${formattedSolution}\n      </div>\n    `;\n  }\n  \n  div.innerHTML = `\n    <div class=\"hsc-issue-header\">\n      <div class=\"hsc-issue-severity ${issue.severity}\"></div>\n      <div class=\"hsc-issue-title\">${name}</div>\n      <div class=\"hsc-issue-count\">${issue.count}個</div>\n      <div class=\"hsc-expand-icon\">▼</div>\n    </div>\n    <div class=\"hsc-issue-details\">\n      <div class=\"hsc-issue-message\">${issue.message}</div>\n      ${issue.text ? `<div class=\"hsc-issue-html\"><strong>検出されたHTML:</strong><br><code style=\"display: block; background: #f8f9fa; padding: 8px; border-radius: 4px; margin: 8px 0; white-space: pre-wrap; font-size: 11px;\">${escapeHtml(issue.text)}</code></div>` : ''}\n      ${elementsListHTML}\n      ${solutionHTML}\n    </div>\n  `;\n  \n  // 初期状態は閉じた状態\n  \n  // クリックで詳細を表示/非表示\n  const header = div.querySelector('.hsc-issue-header');\n  header.addEventListener('click', () => {\n    const wasExpanded = div.classList.contains('expanded');\n    div.classList.toggle('expanded');\n    \n    const expandIcon = div.querySelector('.hsc-expand-icon');\n    expandIcon.textContent = div.classList.contains('expanded') ? '▲' : '▼';\n    \n    // 要素をハイライト（展開時のみ、既存のハイライトは維持）\n    if (!wasExpanded && issue.allElements && issue.allElements.length > 0) {\n      highlightElements(issue.allElements);\n    }\n    // 閉じる時はハイライトを維持（変更前の動作に合わせる）\n  });\n  \n  \n  // 個別要素のクリック処理（後でイベントリスナーを追加）\n  setTimeout(() => {\n    const elementItems = div.querySelectorAll('.hsc-element-item');\n    elementItems.forEach((item, index) => {\n      item.addEventListener('click', (e) => {\n        e.stopPropagation();\n        \n        // 非表示要素はクリックを無効化\n        if (item.dataset.nonVisible === 'true') {\n          debugLog('Drawer', `Non-visible element clicked, ignoring: ${index}`);\n          return;\n        }\n        \n        debugLog('Drawer', `Element item ${index} clicked`);\n        \n        if (issue.allElements && issue.allElements[index]) {\n          debugLog('Drawer', `Selecting element:`, issue.allElements[index]);\n          // 直接ハイライト関数を呼び出し\n          selectElement(issue.allElements[index]);\n        } else {\n          debugLog('Drawer', 'No element found at index:', index);\n        }\n      });\n    });\n  }, 0);\n  \n  return div;\n}\n\n\n/**\n * 問題をフィルタリング\n */\nfunction filterIssues() {\n  const categoryFilter = drawerElement.querySelector('#hsc-category-filter').value;\n  const severityFilter = drawerElement.querySelector('#hsc-severity-filter').value;\n  \n  const issueItems = drawerElement.querySelectorAll('.hsc-issue-item');\n  \n  issueItems.forEach(item => {\n    const category = item.dataset.category;\n    const severity = item.dataset.severity;\n    \n    const categoryMatch = categoryFilter === 'all' || category === categoryFilter;\n    const severityMatch = severityFilter === 'all' || severity === severityFilter;\n    \n    item.style.display = categoryMatch && severityMatch ? 'block' : 'none';\n  });\n}\n\n\n\n\n/**\n * HTMLエスケープ（改行保持）\n * @param {string} text - エスケープするテキスト\n * @returns {string} エスケープされたテキスト\n */\nfunction escapeHtml(text) {\n  if (!text) return '';\n  const div = document.createElement('div');\n  div.textContent = text;\n  return div.innerHTML;\n}\n\n\n/**\n * 解決策をシンプルなUIフォーマットに変換\n * @param {string} text - 解決策テキスト\n * @returns {string} フォーマットされたHTML\n */\nfunction formatSolutionForUI(text) {\n  if (!text) return '';\n  \n  // シンプルなフォーマット化\n  const sections = text.split(/\\n\\s*\\n/).filter(s => s.trim());\n  let html = '<div class=\"hsc-solution-content\">';\n  \n  sections.forEach(section => {\n    const lines = section.trim().split('\\n');\n    \n    // コードブロックの検出\n    if (section.includes('<') && section.includes('>')) {\n      html += `<div class=\"hsc-code-example\">${escapeHtml(section)}</div>`;\n    }\n    // 箇条書きの検出\n    else if (section.includes('•') || /^\\d+\\./.test(section)) {\n      html += '<div class=\"hsc-solution-section\">';\n      html += `<div class=\"hsc-solution-text\">${escapeHtml(section)}</div>`;\n      html += '</div>';\n    }\n    // 通常テキスト\n    else {\n      html += '<div class=\"hsc-solution-section\">';\n      // 最初の行がタイトルの可能性\n      if (lines.length > 1 && (lines[0].includes('：') || lines[0].includes('設定') || lines[0].includes('方法'))) {\n        html += `<h4 class=\"hsc-solution-title\">${escapeHtml(lines[0])}</h4>`;\n        html += `<div class=\"hsc-solution-text\">${escapeHtml(lines.slice(1).join('\\n'))}</div>`;\n      } else {\n        html += `<div class=\"hsc-solution-text\">${escapeHtml(section)}</div>`;\n      }\n      html += '</div>';\n    }\n  });\n  \n  html += '</div>';\n  return html;\n}\n\n","/**\n * HTML Semantic Checker - Content Script Entry Point\n * 全てのモジュールを統合するメインエントリーポイント\n */\n\nimport { debugLog, errorLog } from './utils/debug.js';\nimport { performFullCheck } from './engine/main-engine.js';\nimport { initializeDrawer, displayResultsInDrawer, closeDrawer } from './ui/drawer.js';\nimport { initializeHighlight, highlightAllIssueElements, clearAllHighlights, selectElement } from './ui/highlight.js';\n\n/**\n * HTML Semantic Checker メインクラス\n */\nclass HTMLSemanticChecker {\n  constructor() {\n    this.isInitialized = false;\n    this.checkResults = null;\n  }\n\n  /**\n   * 初期化\n   */\n  initialize() {\n    if (this.isInitialized) {\n      debugLog('Checker', 'Already initialized');\n      return;\n    }\n    \n    debugLog('Checker', 'Initializing HTML Semantic Checker...');\n    \n    try {\n      // UIコンポーネントの初期化\n      initializeDrawer();\n      initializeHighlight();\n      \n      // メッセージリスナーの設定\n      this.setupMessageListeners();\n      \n      // キーボードショートカットの設定\n      this.setupKeyboardShortcuts();\n      \n      this.isInitialized = true;\n      debugLog('Checker', 'Initialization complete');\n      \n    } catch (error) {\n      errorLog('Checker', 'Initialization failed:', error);\n    }\n  }\n\n  /**\n   * メッセージリスナーの設定\n   */\n  setupMessageListeners() {\n    window.addEventListener('message', (event) => {\n      if (!event.data || !event.data.type) return;\n      \n      switch (event.data.type) {\n        case 'HTML_CHECKER_START':\n          this.performFullCheck();\n          break;\n        case 'HTML_CHECKER_RECHECK':\n          this.performFullCheck(false); // 再チェックなので isInitialRun = false\n          break;\n        case 'HTML_CHECKER_CLOSE':\n          this.cleanup();\n          break;\n      }\n    });\n    \n    // Background scriptからのメッセージ\n    chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n      debugLog('Checker', 'Message received from background:', request);\n      \n      // PINGメッセージに応答\n      if (request.type === 'PING') {\n        debugLog('Checker', 'Responding to PING');\n        sendResponse({ type: 'PONG', timestamp: Date.now() });\n        return true;\n      }\n      \n      // チェック開始メッセージ\n      if (request.type === 'START_CHECK') {\n        debugLog('Checker', 'Starting check from background');\n        try {\n          // Background scriptから送信されたisInitialRunフラグを使用\n          const isInitialRun = request.isInitialRun !== undefined ? request.isInitialRun : true;\n          debugLog('Checker', 'Is initial run from background:', isInitialRun);\n          this.performFullCheck(isInitialRun);\n          sendResponse({ success: true, timestamp: Date.now() });\n        } catch (error) {\n          errorLog('Checker', 'Check failed:', error);\n          sendResponse({ success: false, error: error.message });\n        }\n        return true;\n      }\n      \n      // レガシーメッセージハンドリング\n      switch (request.action) {\n        case 'startCheck':\n          this.performFullCheck(false); // レガシーアクションは再実行として扱う\n          sendResponse({ success: true });\n          return true;\n        case 'getResults':\n          sendResponse({ results: this.checkResults });\n          return true;\n      }\n      \n      return false;\n    });\n  }\n\n  /**\n   * キーボードショートカットの設定\n   */\n  setupKeyboardShortcuts() {\n    document.addEventListener('keydown', (event) => {\n      // Escape キーでドロワーを閉じる\n      if (event.key === 'Escape') {\n        closeDrawer();\n      }\n      \n      // Ctrl+Shift+H でチェッカーを起動\n      if (event.ctrlKey && event.shiftKey && event.key === 'H') {\n        event.preventDefault();\n        this.performFullCheck(false); // キーボードショートカットは再実行として扱う\n      }\n    });\n  }\n\n  /**\n   * 完全なページ分析を実行\n   * @param {boolean} isInitialRun - 初回実行かどうか\n   */\n  async performFullCheck(isInitialRun = false) {\n    debugLog('Checker', 'Starting full semantic analysis...');\n    \n    try {\n      // 再実行の場合はページをリロードしてから実行\n      if (!isInitialRun && this.checkResults !== null) {\n        debugLog('Checker', 'Reloading page for re-check...');\n        window.location.reload();\n        return;\n      }\n      \n      // 前回の結果をクリア\n      clearAllHighlights();\n      \n      // 分析を実行\n      const results = performFullCheck();\n      this.checkResults = results;\n      \n      // 結果をドロワーで表示\n      displayResultsInDrawer(results);\n      \n      // 全問題要素を軽くハイライト\n      highlightAllIssueElements(results);\n      \n      // Background scriptに結果を送信\n      chrome.runtime.sendMessage({\n        action: 'checkComplete',\n        results: {\n          url: results.url,\n          title: results.title,\n          issueCount: results.issues.length,\n          timestamp: results.timestamp\n        }\n      });\n      \n      debugLog('Checker', 'Analysis completed successfully');\n      \n    } catch (error) {\n      errorLog('Checker', 'Analysis failed:', error);\n      \n      // エラーをBackground scriptに送信\n      chrome.runtime.sendMessage({\n        action: 'checkError',\n        error: error.message\n      });\n    }\n  }\n\n  /**\n   * クリーンアップ\n   */\n  cleanup() {\n    debugLog('Checker', 'Cleaning up...');\n    \n    try {\n      clearAllHighlights();\n      closeDrawer();\n      \n      // イベントリスナーの削除は各モジュールで実行\n      \n      this.isInitialized = false;\n      this.checkResults = null;\n      \n      debugLog('Checker', 'Cleanup complete');\n      \n    } catch (error) {\n      errorLog('Checker', 'Cleanup failed:', error);\n    }\n  }\n\n  /**\n   * 結果を取得\n   * @returns {Object|null} 分析結果\n   */\n  getResults() {\n    return this.checkResults;\n  }\n}\n\n// 重複注入防止\nif (window.__htmlSemanticCheckerLoaded) {\n  debugLog('Content Script', 'Already loaded, skipping...');\n} else {\n  window.__htmlSemanticCheckerLoaded = true;\n  \n  debugLog('Content Script', 'Loading HTML Semantic Checker...');\n  \n  // メインインスタンスを作成\n  const checker = new HTMLSemanticChecker();\n  \n  // DOM準備完了後に初期化\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', () => {\n      checker.initialize();\n    });\n  } else {\n    checker.initialize();\n  }\n  \n  // グローバルからアクセス可能にする（開発・デバッグ用）\n  window.__htmlSemanticChecker = checker;\n  \n  debugLog('Content Script', 'HTML Semantic Checker loaded successfully');\n}\n\n// 手動起動用の関数をエクスポート\nexport function startCheck() {\n  if (window.__htmlSemanticChecker) {\n    window.__htmlSemanticChecker.performFullCheck(false); // 手動起動は再実行として扱う\n  }\n}\n\nexport function getChecker() {\n  return window.__htmlSemanticChecker;\n}"],"names":["CONFIG","debug","enabledRules","SEVERITY","ERROR","WARNING","INFO","CATEGORIES","HEADING","ACCESSIBILITY","SEO","STRUCTURE","CLEANUP","NON_VISIBLE_TAGS","EXCLUDE_HIGHLIGHT_TAGS","ALLOWED_SIMPLE_TAGS","PRESENTATIONAL_TAGS","INLINE_SEMANTIC_TAGS","TRACKING_PIXEL_PATTERNS","LEGACY_GA_PATTERNS","ADOBE_PATTERNS","DRAWER_STYLES","width","zIndex","debugLog","prefix","_console","_len","arguments","length","args","Array","_key","console","log","apply","concat","errorLog","_console2","_len2","_key2","error","warnLog","_console3","_len3","_key3","warn","isNonVisibleElement","element","closest","includes","tagName","computedStyle","window","getComputedStyle","display","visibility","offsetParent","isHtmlCheckerElement","id","className","isExcludedElement","checkDeepNesting","getMaxDepth","el","currentDepth","undefined","maxChildDepth","_iterator","_createForOfIteratorHelper","children","_step","s","n","done","child","value","childDepth","Math","max","err","e","f","maxDepth","getElementText","maxLength","text","textContent","substring","getElementFullHTML","includeChildren","outerHTML","html","formatHTML","replace","trim","getElementDetails","src","getAttribute","alt","split","pop","name","content","scriptContent","innerHTML","startsWith","headingLevel","charAt","innerContent","elementText","type","placeholder","formInfo","toLowerCase","href","title","ariaLabel","linkInfo","border","cellpadding","cellspacing","tableInfo","getAnalysisTargetElements","startTime","performance","now","targetElements","headings","all","h1","h2","h3","h4","h5","h6","accessibility","images","imagesWithoutAlt","links","formElements","elementsWithRole","expandableElements","navigationLinks","tables","semantic","dateElements","timeElements","cleanup","scripts","noscripts","stats","totalElements","excludedElements","processedElements","allElements","document","querySelectorAll","from","forEach","classifyElement","endTime","processingTime","logPreprocessingStats","match","push","classifyAccessibilityElements","classifySemanticElements","classifyCleanupElements","accessibilityElements","hasAttribute","classList","contains","inputType","semanticElements","cleanupElements","toFixed","tag","count","toUpperCase","getExclusionStats","excludedByReason","htmlChecker","header","footer","total","elements","byReason","analyzeHeadingStructure","filter","h","structure","h1Count","h2Count","h3Count","h4Count","h5Count","h6Count","hasProperHierarchy","issues","detectHeadingIssues","h1Elements","category","severity","rule","message","solution","getH1SolutionText","headingStructureIssues","analyzeDetailedHeadingStructure","_toConsumableArray","problematicHeadings","headingStructureProblems","previousLevel","heading","index","level","parseInt","rawText","headingText","hasVisibleText","test","isImageOnlyH1","childrenText","map","join","problem","suggestion","childElements","childTags","hasDeepNesting","hasTooManyChildren","hasMultipleSameTypeTags","hasOnlySimpleTags","every","isActuallyComplex","firstH1Index","findIndex","detailedMessage","formatHeadingStructureSolution","problems","problemsByRule","emptyHeading","p","logoH1","levelSkip","multipleH1","complexStructure","solutionText","formatProblemSection","example","impact","analyzeAccessibility","withoutAlt","withEmptyAlt","img","withoutText","link","withoutAriaLabel","forms","inputs","inputsWithoutLabels","textareas","landmarks","hasSkipLink","querySelector","hasMainLandmark","detectAccessibilityIssues","altIssues","checkImageAltAttributes","formLabelIssues","checkFormLabels","ariaIssues","checkAriaAttributes","ariaRequiredIssues","checkAriaRequired","linkIssues","checkLinkAccessibility","tableIssues","checkLayoutTables","filteredImages","isTrackingUrl","some","pattern","is1x1Pixel","height","naturalWidth","naturalHeight","isHidden","style","getAltAttributeSolution","missingLabels","_el$id","_el$className","hasLabel","hasAriaLabel","hasAriaLabelledby","hasPlaceholder","hasTitle","isSearchField","getFormLabelSolution","expandableSelectors","missingAriaExpanded","getAriaExpandedSolution","missingAriaCurrent","hasActiveClass","isSameUrl","location","getAriaCurrentSolution","missingRequired","role","getAriaRequiredSolution","problematicLinksSet","Set","onclick","hasJSAction","isButtonMisuse","hasJSVoid","add","problematicLinks","getLinkButtonMisuseSolution","getLayoutTableSolution","layoutTables","table","hasLayoutIndicators","hasTableHeaders","hasCaption","hasDataIndicators","detectSemanticIssues","dateIssues","checkDateInformation","divElements","problematicElements","datePatterns","div","hasTimeTag","isInTimeTag","getDateInformationSolution","detectCleanupIssues","gaIssues","checkLegacyGoogleAnalytics","gtmIssues","checkLegacyGTMContainer","adobeIssues","checkAdobeAnalytics","noscriptIssues","checkUnnecessaryNoScript","robotsIssues","checkOldRobotsMetaTags","deprecatedMetaIssues","checkDeprecatedMetaTags","problematicScripts","script","hasLegacyPattern","getLegacyGASolution","legacyGTMPattern","matches","getLegacyGTMSolution","hasAdobePattern","getAdobeAnalyticsSolution","noscriptTags","problematicTags","noscript","isEmpty","getUnnecessaryNoScriptSolution","metaTags","meta","hasOldDirectives","getOldRobotsMetaSolution","keywordsMeta","getDeprecatedMetaSolution","performFullCheck","results","url","timestamp","Date","statistics","generateBasicStatistics","analyzeSemanticElements","headingStructure","analyzePerformance","detectAllIssues","allDocumentElements","nav","main","article","section","aside","performanceData","domElementCount","scriptTags","externalStylesheets","inlineStyles","imageCount","iframeCount","performanceScore","calculatePerformanceScore","data","score","min","round","allIssues","headingIssues","accessibilityIssues","semanticIssues","cleanupIssues","sort","a","b","severityOrder","generateIssueSummary","summary","byCategory","bySeverity","warning","info","issue","calculateOverallScore","highlightedElements","selectedElement","selectedElementMarker","HIGHLIGHT_STYLE_ID","initializeHighlight","getElementById","addHighlightStyles","addEventListener","handleHighlightMessage","styleElement","createElement","head","appendChild","event","highlightElements","clearAllHighlights","selectElement","highlightAllIssueElements","isArray","nodeType","size","clearSelectedElementHighlight","createElementMarker","setTimeout","scrollIntoView","behavior","block","inline","remove","marker","voidElements","parent","parentElement","position","rect","getBoundingClientRect","parentRect","left","top","body","cleanupHighlight","removeEventListener","getHighlightedElementsCount","getSelectedElement","drawerElement","currentResults","initializeDrawer","createDrawerElement","attachDrawerEvents","getDrawerHTML","getDrawerStyles","closeBtn","closeDrawer","overlay","categoryFilter","severityFilter","filterIssues","openDrawer","drawerOpen","displayResultsInDrawer","loading","resultsDiv","updateIssuesList","issuesList","groupedIssues","groupIssuesByName","Object","entries","_ref","_ref2","_slicedToArray","issueGroup","issueElement","createIssueElement","grouped","_objectSpread","_grouped$issue$name$a","dataset","elementsListHTML","elementDetails","isNonVisible","escapeHtml","solutionHTML","formattedSolution","formatSolutionForUI","wasExpanded","toggle","expandIcon","elementItems","item","stopPropagation","nonVisible","issueItems","categoryMatch","severityMatch","sections","lines","slice","t","r","Symbol","iterator","o","toStringTag","i","c","prototype","Generator","u","create","_regeneratorDefine2","y","G","v","d","bind","l","TypeError","call","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","_next","_throw","_classCallCheck","_defineProperties","_toPropertyKey","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","HTMLSemanticChecker","isInitialized","checkResults","initialize","setupMessageListeners","setupKeyboardShortcuts","_this","chrome","runtime","onMessage","addListener","request","sender","sendResponse","isInitialRun","success","action","_this2","ctrlKey","shiftKey","preventDefault","_performFullCheck2","_callee","_args","_t","_context","reload","sendMessage","issueCount","getResults","__htmlSemanticCheckerLoaded","checker","readyState","__htmlSemanticChecker","startCheck","getChecker"],"sourceRoot":""}